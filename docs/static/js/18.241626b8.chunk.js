(this["webpackJsonpnile-portal"]=this["webpackJsonpnile-portal"]||[]).push([[18],{1100:function(e,t,n){"use strict";n.r(t);var r=n(308),a=n(64),i=n.n(a),c=n(102),o=n(22),s=n(12);function l(e){var t;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var u=n(955),d=n(155),b=n(943),j=n(726),f=n(57),p=n(831),h=n(1112),m=n(1113),O=n(1114),x=n(1108),g=n(1109),v=n(1099),y=n(848),C=n(1090),M=n(122),k=n.n(M),S=n(96),w=n.n(S),F=n(55),R=n(60),I=n(883),T=n.n(I),N=(n(0),n(47)),D=n(196),_=n(312),A=n(1070),E=n(1105),P=n(1),z=[{id:"Title",numeric:!1,label:"Title",align:"left",disablePadding:!1},{id:"Category",numeric:!1,label:"Category",align:"left",disablePadding:!1},{id:"FormType",numeric:!1,label:"Form Type",align:"left"},{id:"CreatedAt",numeric:!1,label:"Created Date",align:"left"},{id:"UpdatedAt",numeric:!1,label:"Updated Date",align:"left"}],L=Object(j.a)((function(){return{sortSpan:Object(s.a)({},C.a)}})),B=function(e){var t=L(),n=e.onSelectAllClick,r=e.order,a=e.orderBy,i=e.numSelected,c=e.rowCount,o=e.onRequestSort;return Object(P.jsx)(A.a,{children:Object(P.jsxs)(x.a,{children:[Object(P.jsx)(g.a,{padding:"checkbox",sx:{pl:3},children:Object(P.jsx)(v.a,{color:"primary",indeterminate:i>0&&i<c,checked:c>0&&i===c,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),z.map((function(e){return Object(P.jsx)(g.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id?r:void 0,children:Object(P.jsxs)(E.a,{active:a===e.id,direction:a===e.id?r:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,a===e.id?Object(P.jsx)("span",{className:t.sortSpan,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var n})),Object(P.jsx)(g.a,{sortDirection:!1,align:"center",sx:{pr:3},children:"Action"})]})})},q=n(863),U=n(864),H=n(311),J=n(865),V=n(145),W=n(13),Q=n(29),Y=n(16),Z=n(843),G=n(834),K=n(734),X=n(1111),$=n(942),ee=n(909),te=n.n(ee),ne=n(954),re=n.n(ne),ae=Object(j.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},highlight:{backgroundColor:Object(Q.a)(e.palette.primary.main,e.palette.action.activatedOpacity)},title:{flex:"1 1 100%"}}})),ie=function(e){var t=ae(),n=e.numSelected,r=e.onDelete,a=e.onCreate;return Object(P.jsx)(Z.a,{className:Object(Y.a)(t.root,Object(W.a)({},t.highlight,n>0)),children:Object(P.jsxs)(G.a,{container:!0,justifyContent:"space-between",alignItems:"center",spacing:2,children:[Object(P.jsx)(G.a,{item:!0,xs:12,sm:6,children:n>0&&Object(P.jsxs)(K.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]})}),Object(P.jsx)(G.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(G.a,{container:!0,justifyContent:"flex-end",alignItems:"center",children:n>0?Object(P.jsx)(X.a,{title:"Delete",children:Object(P.jsx)(y.a,{onClick:r,children:Object(P.jsx)(re.a,{})})}):Object(P.jsx)(X.a,{title:"Create",children:Object(P.jsx)($.a,{color:"primary","aria-label":"add",sx:{boxShadow:"none",ml:1,width:"48px",height:"48px"},onClick:a,children:Object(P.jsx)(te.a,{})})})})})]})})},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var n=w()(t,"id"),r=w()(t,"Name",n);return Object(s.a)(Object(s.a)({},e),{},Object(W.a)({},n,r))}),{})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var n=w()(t,"id"),r=w()(t,"Title",n);return Object(s.a)(Object(s.a)({},e),{},Object(W.a)({},n,{categoryName:r,formTypes:ce(w()(t,"FormTypes",[]))}))}),{})},se=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},sortSpan:Object(s.a)({},C.a)}})),le=function(){var e=Object(u.a)(Object(d.a)(_.a.listForms),{variables:{limit:N.a.pagination.limit},fetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0}),t=e.loading,n=e.error,r=e.data,a=e.fetchMore,j=Object(u.a)(Object(d.a)(_.a.listFormCategories)).data,C=Object(b.a)(Object(d.a)(H.deleteForm),{}),M=Object(o.a)(C,2),S=M[0],I=M[1],A=I.loading,E=I.error,z=w()(r,["listForms","items"],[]),L=w()(r,"listForms.nextToken",void 0),W=Object(f.a)(),Q=se(),Y=Object(V.b)("CreatedAt"),Z=Y.order,G=Y.orderBy,K=Y.handleRequestSort,X=Object(V.c)("FormId"),$=X.selected,ee=X.isSelected,te=X.handleSelect,ne=X.handleSelectAll,re=X.clearSelected,ae=Object(F.h)();if((t||A)&&!r)return Object(P.jsx)(D.a,{});if(n||k()(r)||E)return Object(P.jsx)(p.a,{severity:"error",sx:{color:W.palette.error.main},children:"Something went wrong!"});var ce=function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a,c,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=2;break}return e.abrupt("return");case 2:t=!0,n=!1,e.prev=4,a=i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u,e.next=3,S({variables:{FormId:t},update:function(e){e.modify({fields:{listForms:function(e,n){var r=n.readField,a=e.items.filter((function(e){return t!==r("FormId",e)}));return Object(s.a)(Object(s.a)({},e),{},{items:a})}}})}});case 3:case"end":return e.stop()}}),e)})),c=l($);case 7:return e.next=9,c.next();case 9:return o=e.sent,t=o.done,e.next=13,o.value;case 13:if(u=e.sent,t){e.next=19;break}return e.delegateYield(a(),"t0",16);case 16:t=!0,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(4),n=!0,r=e.t1;case 25:if(e.prev=25,e.prev=26,t||null==c.return){e.next=30;break}return e.next=30,c.return();case 30:if(e.prev=30,!n){e.next=33;break}throw r;case 33:return e.finish(30);case 34:return e.finish(25);case 35:re();case 36:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])})));return function(){return e.apply(this,arguments)}}(),le=function(e){var t=oe(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);return e.map((function(e){var n=w()(e,"CategoryId"),r=w()(e,"FormTypeId");return Object(s.a)(Object(s.a)({},e),{},{CategoryName:w()(t,[n,"categoryName"]),FormTypeName:w()(t,[n,"formTypes",r])})}))}(z,w()(j,["listFormCategories"],[])),ue=Object(q.b)(le,Object(q.a)(Z,G));return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(ie,{numSelected:$.length,onDelete:ce,onCreate:function(){var e=Object(F.f)("/form-add");ae.push(e)}}),Object(P.jsx)(h.a,{children:Object(P.jsxs)(m.a,{className:Q.table,"aria-labelledby":"tableTitle",size:"small",children:[Object(P.jsx)(B,{numSelected:$.length,order:Z,orderBy:G,onSelectAllClick:function(e){ne(e.target.checked,z)},onRequestSort:K,rowCount:z.length}),Object(P.jsx)(O.a,{children:ue.map((function(e,t){if("number"===typeof e)return null;var n=Object(F.f)("/form/:id",{id:e.FormId}),r=ee(e.FormId),a="enhanced-table-checkbox-".concat(t);return Object(P.jsxs)(x.a,{hover:!0,onClick:function(){return te(e.FormId)},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:[Object(P.jsx)(g.a,{sx:{pl:3},padding:"checkbox",children:Object(P.jsx)(v.a,{color:"primary",checked:r,inputProps:{"aria-labelledby":a}})}),Object(P.jsx)(g.a,{align:"left",children:e.Title}),Object(P.jsxs)(g.a,{align:"left",children:[e.CategoryName||e.CategoryId," "]}),Object(P.jsx)(g.a,{align:"left",children:e.FormTypeName||e.FormTypeId}),Object(P.jsx)(g.a,{align:"left",children:Object(J.a)(e.CreatedAt)}),Object(P.jsx)(g.a,{align:"left",children:Object(J.a)(e.UpdatedAt)}),Object(P.jsx)(g.a,{align:"left",sx:{pr:3},children:Object(P.jsx)(R.c,{to:n,children:Object(P.jsx)(y.a,{color:"primary",children:Object(P.jsx)(T.a,{sx:{fontSize:"1.3rem"}})})})})]},e.FormId)}))})]})}),Object(P.jsx)(U.a,{onLoadMore:function(){a({variables:{limit:N.a.pagination.limit,nextToken:L}})},disabled:!L,loading:t})]})};t.default=function(){return Object(P.jsx)(r.a,{title:"Forms List",children:Object(P.jsx)(le,{})})}},863:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var r=n(96),a=n.n(r),i=function(e,t,n){return a()(t,n)<a()(e,n)?-1:a()(t,n)>a()(e,n)?1:0},c=function(e,t){return"desc"===e?function(e,n){return i(e,n,t)}:function(e,n){return-i(e,n,t)}},o=function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}},864:function(e,t,n){"use strict";var r=n(847),a=n(834),i=n(1110),c=n(69),o=n(1104),s=n(726),l=n(1),u=Object(o.a)({root:{borderRadius:"50%",minWidth:"0",padding:"12px"}})(r.a),d=Object(s.a)((function(){return{toolbar:{padding:"24px 16px 2px"}}}));t.a=function(e){var t=e.onLoadMore,n=e.disabled,r=e.loading,o=d();return Object(l.jsx)(a.a,{container:!0,className:o.toolbar,justifyContent:"center",children:Object(l.jsx)(u,{type:"button",onClick:function(){return t()},disabled:n||r,children:r?Object(l.jsx)(i.a,{size:24}):Object(l.jsx)(c.a,{})})})}},865:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(47),a=function(e){return"".concat(e?new Intl.DateTimeFormat(r.a.locate.country,{timeZone:r.a.locate.timezone}).format(new Date(e)):"")}},943:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),a=n(0),i=n(44),c=n(109),o=n(91),s=n(314),l=n(289),u=function(e){function t(t){var n=t.options,r=t.context,a=t.result,i=t.setResult,o=e.call(this,n,r)||this;return o.runMutation=function(e){void 0===e&&(e={}),o.onMutationStart();var t=o.generateNewMutationId();return o.mutate(e).then((function(e){return o.onMutationCompleted(e,t),e})).catch((function(e){var n=o.getOptions().onError;if(o.onMutationError(e,t),n)return n(e),{data:void 0,errors:e};throw e}))},o.verifyDocumentType(n.mutation,c.a.Mutation),o.result=a,o.setResult=i,o.mostRecentMutationId=0,o}return Object(r.__extends)(t,e),t.prototype.execute=function(e){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,c.a.Mutation),[this.runMutation,Object(r.__assign)(Object(r.__assign)({},e),{client:this.refreshClient().client})]},t.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},t.prototype.cleanup=function(){},t.prototype.mutate=function(e){return this.refreshClient().client.mutate(Object(l.b)(this.getOptions(),e))},t.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},t.prototype.onMutationCompleted=function(e,t){var n=this.getOptions(),r=n.onCompleted,a=n.ignoreResults,i=e.data,c=e.errors,s=c&&c.length>0?new o.a({graphQLErrors:c}):void 0;this.isMostRecentMutation(t)&&!a&&this.updateResult({called:!0,loading:!1,data:i,error:s}),r&&r(i)},t.prototype.onMutationError=function(e,t){this.isMostRecentMutation(t)&&this.updateResult({loading:!1,error:e,data:void 0,called:!0})},t.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},t.prototype.isMostRecentMutation=function(e){return this.mostRecentMutationId===e},t.prototype.updateResult=function(e){if(this.isMounted&&(!this.previousResult||!Object(i.a)(this.previousResult,e)))return this.setResult(e),this.previousResult=e,e},t}(s.a),d=n(224);function b(e,t){var n=Object(a.useContext)(Object(d.a)()),i=Object(a.useState)({called:!1,loading:!1}),c=i[0],o=i[1],s=t?Object(r.__assign)(Object(r.__assign)({},t),{mutation:e}):{mutation:e},l=Object(a.useRef)();var b=(l.current||(l.current=new u({options:s,context:n,result:c,setResult:o})),l.current);return b.setOptions(s),b.context=n,Object(a.useEffect)((function(){return b.afterExecute()})),b.execute(c)}},954:function(e,t,n){"use strict";var r=n(134),a=n(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a(n(0));var i=r(n(136)),c=n(1),o=(0,i.default)((0,c.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=o}}]);
//# sourceMappingURL=18.241626b8.chunk.js.map