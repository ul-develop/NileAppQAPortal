(this["webpackJsonpnile-portal"]=this["webpackJsonpnile-portal"]||[]).push([[19],{689:function(e,t,n){"use strict";var a=n(22),r=n(0),i=n.n(r),c=n(795),o=n(664),s=n(1),l=i.a.forwardRef((function(e,t){var n,r,i=e.children,l=e.type,d=e.direction,j=e.offset,b=e.scale;switch(d){case"up":case"left":n=j,r=0;break;case"right":case"down":default:n=0,r=j}var u=Object(c.a)(n,r),p=Object(a.a)(u,2),f=p[0],O=p[1],x=Object(c.a)(n,r),m=Object(a.a)(x,2),g=m[0],v=m[1];switch(l){case"rotate":return Object(s.jsx)(o.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:i});case"slide":return"up"===d||"down"===d?Object(s.jsx)(o.a.div,{ref:t,animate:{y:void 0!==g?g:""},onHoverEnd:function(){return v()},onHoverStart:function(){return v()},children:i}):Object(s.jsx)(o.a.div,{ref:t,animate:{x:void 0!==f?f:""},onHoverEnd:function(){return O()},onHoverStart:function(){return O()},children:i});case"scale":default:return Object(s.jsx)(o.a.div,{ref:t,whileHover:{scale:null===b||void 0===b?void 0:b.hover},whileTap:{scale:null===b||void 0===b?void 0:b.tap},children:i})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=l},700:function(e,t,n){"use strict";var a=n(15),r=n(131),i=n(61),c=n(574),o=n(393),s=n(573),l=n(576),d=n(575),j=n(1),b=["children","content","contentClass","darkTitle","secondary","sx","title"],u=function(e){var t=e.children,n=e.content,u=e.contentClass,p=e.darkTitle,f=e.secondary,O=e.sx,x=void 0===O?{}:O,m=e.title,g=Object(r.a)(e,b),v=Object(i.a)();return Object(j.jsxs)(c.a,Object(a.a)(Object(a.a)({sx:Object(a.a)({border:"1px solid",borderColor:"dark"===v.palette.mode?v.palette.dark.light+15:v.palette.primary.light,":hover":{boxShadow:"dark"===v.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},x)},g),{},{children:[!p&&m&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h5",children:m}),action:f}),p&&m&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h4",children:m}),action:f}),m&&Object(j.jsx)(l.a,{sx:{opacity:1,borderColor:"dark"===v.palette.mode?v.palette.dark.light+15:v.palette.primary.light}}),n&&Object(j.jsx)(d.a,{sx:{p:2.5},className:u||"",children:t}),!n&&t]}))};u.defaultProps={content:!0},t.a=u},713:function(e,t,n){"use strict";var a=n(45),r=n.n(a),i=n(970),c=n(971),o=n(1);t.a=function(e){var t=e.data,n=e.source,a=void 0===n?"":n,s=e.label,l=e.getValue,d=e.defaultValue;return Object(o.jsxs)(i.a,{children:[Object(o.jsx)(c.a,{variant:"head",children:s}),Object(o.jsx)(c.a,{children:l?l(t):r()(t,a)||d||""})]})}},753:function(e,t,n){"use strict";var a=n(15),r=n(16),i=n(29),c=n(687),o=n(926),s=n(674),l=n(577),d=n(743),j=n.n(d),b=n(572),u=n(19),p=n(752),f=n(45),O=n.n(f),x=n(117),m=n.n(x),g=n(0),v=n(794),h=n(756),y=n(573),C=n(267),w=n.n(C),S=n(1),I=Object(b.a)((function(){return{uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),F=function(e){var t=e.file,n=e.onRemove,a=I();return t.preview?Object(S.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(S.jsxs)("div",{className:a.uploadImage,children:[Object(S.jsx)(v.a,{component:"img",src:t.preview,title:"file"}),Object(S.jsx)("div",{className:a.imageHover,children:Object(S.jsx)(h.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return n()},children:Object(S.jsx)(w.a,{})})})]})}):Object(S.jsx)(s.a,{item:!0,xs:12,alignContent:"center",alignItems:"center",children:Object(S.jsxs)("div",{className:a.name,children:[Object(S.jsx)(y.a,{children:t.name}),Object(S.jsx)("div",{className:a.imageHover,children:Object(S.jsx)(h.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return n()},children:Object(S.jsx)(w.a,{})})})]})})},R=n(929),k=n(564),D=n(921),A=n(922),P=Object(k.a)((function(e){return{uploadFile:{position:"relative",overflow:"hidden",display:"flex",alignItems:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1,cursor:"pointer"}},imageHover:{opacity:0},removeButton:{margin:"auto"},removeIcon:{color:e.palette.primary.main},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),H=function(e){var t=e.preview,n=e.name,r=m()(t)?"":{component:R.a,href:t,target:"_blank"};return Object(S.jsx)(y.a,Object(a.a)(Object(a.a)({variant:"body2",color:"primary",display:"block"},r),{},{children:n}))},N=function(e){var t=e.file,n=e.onRemove,a=P();return Object(S.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(S.jsxs)("div",{className:a.uploadFile,children:[Object(S.jsx)(D.a,{}),H(t),Object(S.jsx)("div",{className:a.imageHover,children:Object(S.jsx)(A.a,{onClick:function(){return n()},className:a.removeIcon})})]})})},_=n(85),z="application/pdf",B=Object(b.a)((function(){return{fileInput:{background:"#fcfcfe",width:"100%",borderWidth:2,borderRadius:2,borderColor:"#eee",borderStyle:"dashed"},activeStyle:{borderColor:"#2196f3"},fileContainer:{padding:"30px 0",textAlign:"center",borderRadius:"4px",cursor:"pointer","& > svg":{verticalAlign:"sub",marginRight:"5px"}},uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},previewWrapper:{marginTop:"12px"}}}));t.a=function(e){var t=e.files,n=e.accept,d=void 0===n?"image/*":n,b=e.maxFiles,f=void 0===b?10:b,x=e.onDrop,v=e.disabled,h=e.name,y=e.loading,C=void 0!==y&&y,w=B(),I=Object(p.a)({onDrop:x,accept:d,maxFiles:f}),R=I.getRootProps,k=I.getInputProps,D=I.isDragActive,A=I.fileRejections,P=Object(_.e)();Object(g.useEffect)((function(){if(!m()(A)){var e=O()(A,"0.errors.0.message","");P({message:e,variant:"alert",alertSeverity:"error"})}}),[A]);var H=function(e){return function(){var n=Object(i.a)(t);n.splice(e,1),x(n)}};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(c.a,Object(a.a)(Object(a.a)({},R({className:Object(u.a)(w.fileInput,Object(r.a)({},w.activeStyle,D))})),{},{disabled:v,children:Object(S.jsxs)(o.a,{className:w.fileContainer,children:[Object(S.jsx)(j.a,{}),"Drop file here to upload"]})})),Object(S.jsx)("input",Object(a.a)(Object(a.a)({},k()),{},{name:h})),C?Object(S.jsx)(s.a,{item:!0,xs:12,children:Object(S.jsx)(l.a,{})}):Object(S.jsx)(s.a,{container:!0,spacing:1,className:w.previewWrapper,children:t.map((function(e,t){var n=e.type===z?N:F;return Object(S.jsx)(n,{file:e,onRemove:H(t)},e.name)}))})]})}},957:function(e,t,n){"use strict";n.r(t);var a=n(59),r=n(61),i=n(670),c=n(575),o=n(674),s=n(973),l=n(974),d=n(975),j=n(576),b=n(757),u=n(706),p=n(687),f=n(972),O=n(45),x=n.n(O),m=n(117),g=n.n(m),v=n(810),h=n(151),y=n(0),C=n(284),w=n(689),S=n(700),I=n(108),F=n(198),R=n(155),k=n(293),D=n(713),A=n(753),P=n(22),H=n(29),N=n(724),_=n(36),z=n(289),B=n(288),T=n(85),E=n(15),L=n(1),U={150:{variant:"outlined",color:"secondary"},200:{variant:"contained",color:"primary"},500:{variant:"contained",color:"primary"},800:{variant:"contained",color:"primary"},910:{variant:"text",color:"error"}},V=function(e){var t=e.action,n=e.onClick,a=e.disabled,r=t.action,i=t.next_step_id,c=U[i];return Object(L.jsx)(o.a,{item:!0,children:Object(L.jsx)(p.a,Object(E.a)(Object(E.a)({type:"button",onClick:n,disabled:a},c),{},{children:r}))})},$=_.a.offerSteps,q=[$.awaitingAdvisorApproval,$.paBeingCreated,$.reviewScarRequest],W=function(e){var t=e.offer,n=Object(v.a)(Object(h.d)(B.listOfferSteps),{fetchPolicy:"cache-first"}),a=n.loading,r=n.data,i=x()(r,"listOfferSteps",[]),c=+x()(t,"StepId",0);if(!q.includes(c))return Object(L.jsx)(L.Fragment,{});var s=function(e){return c===e},l=s($.paBeingCreated)&&!Object(k.b)(t,"SignedPurchaseAgreement"),d=s($.reviewScarRequest)&&!Object(k.b)(t,"SCAR");if(l||d)return Object(L.jsx)(L.Fragment,{});var j=x()(t,"OfferId"),b=i.find((function(e){return e.id===c})),u=Object(y.useMemo)((function(){var e=x()(b,"allowed_actions",[]);return e.length?Object(H.a)(e).reverse():e}),[b]),p=Object(T.e)(),f=Object(N.a)(Object(h.d)(z.updateOfferStep),{onCompleted:function(e){g()(e)||g()(e.updateOfferStep)||window.location.reload()},onError:function(e){p({message:x()(e,"message","Something went wrong"),variant:"alert",alertSeverity:"error"})}}),O=Object(P.a)(f,2),m=O[0],C=O[1].loading;return Object(L.jsxs)(L.Fragment,{children:[(C||a)&&Object(L.jsx)(R.a,{}),Object(L.jsx)(o.a,{container:!0,spacing:1,children:u.map((function(e){return Object(L.jsx)(V,{action:e,onClick:(t=e.next_step_id,function(){return m({variables:{OfferId:j,NewStepId:t}})}),disabled:C},"".concat(j,"-").concat(e.next_step_id));var t}))})]})},J="application/pdf",M=n(202),Q=n(564),Y=Object(Q.a)((function(e){return{downloadLink:{marginRight:e.spacing(2)}}})),G=function(e){var t=e.submissionFiles,n=Y(),a=function(e,t,a){var r=e.find((function(e){return x()(e,["QuestionName"],"")===t})),i=x()(r,["Files","0","presignedUrl"]);return g()(i)?Object(L.jsx)(L.Fragment,{}):Object(L.jsx)(p.a,{variant:"outlined",color:"secondary",className:n.downloadLink,type:"button",onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?window.location.href=e:window.open(e,"_blank")}(i)},children:a})};return g()(t)?Object(L.jsx)(L.Fragment,{}):Object(L.jsxs)(L.Fragment,{children:[a(t,"fd_upload_buyer_preapproval_letter","Pre-Approval Letter"),a(t,"fd_upload_buyer_proof_of_funds","Proof of Funds"),a(t,"fundingtype_fund_proof","Proof of Funds")]})},K=n(573),X=n(969),Z=n(970),ee=n(971),te=n(291),ne="Done",ae="In Process",re="OVERDUE",ie=function(e,t){var n,a,r=x()(e,["Contingencies","".concat(t,"DueDate")]);return r&&(n=Object(te.a)(r),a=Object(te.a)((new Date).toDateString())<=n?ae:re),"Yes"===x()(e,["Contingencies","".concat(t,"Removed")])&&(a=ne),{status:a,dueDate:n}},ce=function(e){var t=e.offer,n=function(e){return[Object(E.a)({name:"FinanceContingency",title:"Finance Contingency Removal"},ie(e,"FinanceContingency")),Object(E.a)({name:"InspectionContingency",title:"Inspection Contingency Removal"},ie(e,"InspectionContingency")),Object(E.a)({name:"SaleOfHomeContingency",title:"Homesale Contingency Removal"},ie(e,"SaleOfHomeContingency"))]}(t),a=x()(n,"AllRemoved",!1),r=x()(t,["PropertyData","FullAddress"]),i=x()(t,"StepId",0)<500;return g()(n)||a||i?Object(L.jsx)(L.Fragment,{}):Object(L.jsxs)(S.a,{title:"Contingencies Status",children:[Object(L.jsx)(K.a,{variant:"subtitle2",children:r}),Object(L.jsx)(s.a,{children:Object(L.jsxs)(l.a,{sx:{"& td":{borderBottom:"none"}},size:"small",children:[Object(L.jsx)(X.a,{children:Object(L.jsxs)(Z.a,{children:[Object(L.jsx)(ee.a,{children:"Type"}),Object(L.jsx)(ee.a,{children:"Due Date"}),Object(L.jsx)(ee.a,{children:"Status"})]})}),Object(L.jsx)(d.a,{children:n.map((function(e){return Object(L.jsxs)(Z.a,{children:[Object(L.jsx)(ee.a,{variant:"head",children:e.title}),Object(L.jsx)(ee.a,{variant:"head",children:e.dueDate||"n/a"}),Object(L.jsx)(ee.a,{variant:"head",children:e.status||"n/a"})]},e.title)}))})]})})]})},oe=n(203),se="SignedPurchaseAgreement",le="SCAR",de=function(e){var t=e.id,n=Object(v.a)(Object(h.d)(F.a.getOffer),{variables:{OfferId:t}}),a=n.loading,O=n.error,m=n.data,P=n.refetch,H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return{name:"getOfferDocPutUrls",query:F.a.getOfferDocPutUrls,generateVariables:function(n){return{Documents:n,OfferId:t,DocumentType:e}},refetch:P}},N=Object(T.f)(H(se)),z=N.files,B=N.onFilesChange,E=N.uploadFiles,U=N.isUploadLoading,V=Object(T.f)(H()),$=V.files,q=V.onFilesChange,Q=V.uploadFiles,Y=V.isUploadLoading,K=x()(m,"getOffer",{}),X=+x()(K,"StepId",0),Z=x()(K,"OfferNo",""),ee=x()(K,"SubmissionFiles",[]),te=Object(r.a)();if(Object(y.useEffect)((function(){var e=x()(m,"getOffer",{}),t=x()(e,"SignedPurchaseAgreement")||[],n=x()(e,"SCAR")||[];g()(t)||B(t.map(M.b)),g()(n)||q(n.map(M.b))}),[m]),a)return Object(L.jsx)(R.a,{});if(O&&g()(K))return Object(L.jsx)(i.a,{severity:"error",sx:{color:te.palette.error.main},children:"Offer not found"});var ne=X===_.a.offerSteps.paBeingCreated,ae=X===_.a.offerSteps.reviewScarRequest,re=U||Y;return Object(L.jsxs)(C.a,{title:Z,content:!1,secondary:Object(L.jsx)(W,{offer:K}),children:[Object(L.jsx)(c.a,{children:Object(L.jsxs)(o.a,{container:!0,spacing:I.b,children:[Object(L.jsxs)(o.a,{item:!0,lg:6,xs:12,children:[Object(L.jsx)(S.a,{title:"Offer Information",children:Object(L.jsx)(s.a,{children:Object(L.jsx)(l.a,{sx:{"& td":{borderBottom:"none"}},size:"small",children:Object(L.jsxs)(d.a,{children:[Object(L.jsx)(D.a,{data:K,source:"OfferNo",label:"Offer No"}),Object(L.jsx)(D.a,{data:K,source:"PropertyData.FullAddress",label:"Property Address"}),Object(L.jsx)(D.a,{data:K,source:"PropertyData.OwnerNames",label:"Sellers"}),Object(L.jsx)(D.a,{data:K,getValue:k.a,label:"Offer Price"}),Object(L.jsx)(D.a,{data:K,source:"Funding.PurchaseType",label:"Funding"}),Object(L.jsx)(D.a,{data:K,source:"Funding.LoanType",label:"Loan Type"}),Object(L.jsx)(D.a,{data:K,getValue:function(e){return Object(oe.a)(x()(e,"Funding.DownPayment"))},label:"Down Payment"}),Object(L.jsx)(D.a,{data:K,source:"Step.messages.advisor",label:"Status"})]})})})}),Object(L.jsx)("br",{}),Object(L.jsx)(ce,{offer:K})]}),Object(L.jsx)(o.a,{item:!0,lg:6,xs:12,children:Object(L.jsxs)(o.a,{container:!0,direction:"column",spacing:I.b,children:[Object(L.jsx)(o.a,{item:!0,xs:12,children:Object(L.jsx)(S.a,{title:"Signed Purchase Agreement",children:Object(L.jsx)(A.a,{name:"PA",files:z,onDrop:B,accept:J,disabled:!ne})})}),Object(L.jsx)(o.a,{item:!0,xs:12,children:Object(L.jsx)(S.a,{title:"SCAR",children:Object(L.jsx)(A.a,{name:"SCAR",files:$,onDrop:q,accept:J,disabled:!ae})})})]})})]})}),Object(L.jsx)(j.a,{}),Object(L.jsx)(b.a,{children:Object(L.jsx)(o.a,{item:!0,xs:12,children:Object(L.jsx)(u.a,{direction:"row",justifyContent:"flex-end",children:Object(L.jsxs)(w.a,{children:[Object(L.jsx)(G,{submissionFiles:ee}),Object(L.jsx)(p.a,{color:"primary",variant:"contained",type:"submit",disabled:!ne&&!ae||re,onClick:function(){E(),Q()},children:re?Object(L.jsx)(f.a,{size:"1.5rem",color:"secondary"}):"Update"})]})})})})]})};t.default=function(){var e=Object(a.j)().id;return Object(L.jsx)(de,{id:e})}}}]);
//# sourceMappingURL=19.83806399.chunk.js.map