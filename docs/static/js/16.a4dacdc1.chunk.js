(this["webpackJsonpnile-portal"]=this["webpackJsonpnile-portal"]||[]).push([[16],{682:function(e,t,n){"use strict";var a=n(23),r=n(0),i=n.n(r),c=n(915),o=n(657),s=n(1),l=i.a.forwardRef((function(e,t){var n,r,i=e.children,l=e.type,d=e.direction,j=e.offset,u=e.scale;switch(d){case"up":case"left":n=j,r=0;break;case"right":case"down":default:n=0,r=j}var b=Object(c.a)(n,r),f=Object(a.a)(b,2),p=f[0],O=f[1],m=Object(c.a)(n,r),x=Object(a.a)(m,2),v=x[0],g=x[1];switch(l){case"rotate":return Object(s.jsx)(o.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:i});case"slide":return"up"===d||"down"===d?Object(s.jsx)(o.a.div,{ref:t,animate:{y:void 0!==v?v:""},onHoverEnd:function(){return g()},onHoverStart:function(){return g()},children:i}):Object(s.jsx)(o.a.div,{ref:t,animate:{x:void 0!==p?p:""},onHoverEnd:function(){return O()},onHoverStart:function(){return O()},children:i});case"scale":default:return Object(s.jsx)(o.a.div,{ref:t,whileHover:{scale:null===u||void 0===u?void 0:u.hover},whileTap:{scale:null===u||void 0===u?void 0:u.tap},children:i})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=l},691:function(e,t,n){"use strict";var a=n(15),r=n(151),i=n(57),c=n(566),o=n(386),s=n(565),l=n(568),d=n(567),j=n(1),u=["children","content","contentClass","darkTitle","secondary","sx","title"],b=function(e){var t=e.children,n=e.content,b=e.contentClass,f=e.darkTitle,p=e.secondary,O=e.sx,m=void 0===O?{}:O,x=e.title,v=Object(r.a)(e,u),g=Object(i.a)();return Object(j.jsxs)(c.a,Object(a.a)(Object(a.a)({sx:Object(a.a)({border:"1px solid",borderColor:"dark"===g.palette.mode?g.palette.dark.light+15:g.palette.primary.light,":hover":{boxShadow:"dark"===g.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},m)},v),{},{children:[!f&&x&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h5",children:x}),action:p}),f&&x&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h4",children:x}),action:p}),x&&Object(j.jsx)(l.a,{sx:{opacity:1,borderColor:"dark"===g.palette.mode?g.palette.dark.light+15:g.palette.primary.light}}),n&&Object(j.jsx)(d.a,{sx:{p:2.5},className:b||"",children:t}),!n&&t]}))};b.defaultProps={content:!0},t.a=b},693:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(47),r=function(e){return"".concat(e?new Intl.DateTimeFormat(a.a.locate.country,{timeZone:a.a.locate.timezone}).format(new Date(e)):"")}},706:function(e,t,n){"use strict";var a=n(97),r=n.n(a),i=n(949),c=n(950),o=n(1);t.a=function(e){var t=e.data,n=e.source,a=void 0===n?"":n,s=e.label,l=e.getValue,d=e.defaultValue;return Object(o.jsxs)(i.a,{children:[Object(o.jsx)(c.a,{variant:"head",children:s}),Object(o.jsx)(c.a,{children:l?l(t):r()(t,a)||d||""})]})}},707:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(47),r=function(e){return"".concat(e?new Intl.NumberFormat(a.a.locate.country,{style:"currency",currency:a.a.locate.currency}).format(e):"")}},717:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return j}));var a=n(97),r=n.n(a),i=n(127),c=n.n(i),o=n(47),s=n(707),l=o.a.offerSteps,d=function(e){var t;return(t=+r()(e,["Step","id"])===l.counteredBySeller?r()(e,["CounterOffer","SellerCounter","OfferPrice"]):r()(e,["CounterOffer","BuyerCounter","OfferPrice"]))||(t=r()(e,["Offer","OfferPrice"])),t?Object(s.a)(t):""},j=function(e,t){return!c()(r()(e,t))}},747:function(e,t,n){"use strict";var a=n(15),r=n(16),i=n(29),c=n(680),o=n(911),s=n(667),l=n(569),d=n(739),j=n.n(d),u=n(564),b=n(19),f=n(746),p=n(97),O=n.n(p),m=n(127),x=n.n(m),v=n(0),g=n(913),h=n(749),y=n(565),C=n(259),w=n.n(C),S=n(1),I=Object(u.a)((function(){return{uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),F=function(e){var t=e.file,n=e.onRemove,a=I();return t.preview?Object(S.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(S.jsxs)("div",{className:a.uploadImage,children:[Object(S.jsx)(g.a,{component:"img",src:t.preview,title:"file"}),Object(S.jsx)("div",{className:a.imageHover,children:Object(S.jsx)(h.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return n()},children:Object(S.jsx)(w.a,{})})})]})}):Object(S.jsx)(s.a,{item:!0,xs:12,alignContent:"center",alignItems:"center",children:Object(S.jsxs)("div",{className:a.name,children:[Object(S.jsx)(y.a,{children:t.name}),Object(S.jsx)("div",{className:a.imageHover,children:Object(S.jsx)(h.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return n()},children:Object(S.jsx)(w.a,{})})})]})})},R=n(914),P=n(557),D=n(908),k=n(909),A=Object(P.a)((function(e){return{uploadFile:{position:"relative",overflow:"hidden",display:"flex",alignItems:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1,cursor:"pointer"}},imageHover:{opacity:0},removeButton:{margin:"auto"},removeIcon:{color:e.palette.primary.main},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),H=function(e){var t=e.preview,n=e.name,r=x()(t)?"":{component:R.a,href:t,target:"_blank"};return Object(S.jsx)(y.a,Object(a.a)(Object(a.a)({variant:"body2",color:"primary",display:"block"},r),{},{children:n}))},N=function(e){var t=e.file,n=e.onRemove,a=A();return Object(S.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(S.jsxs)("div",{className:a.uploadFile,children:[Object(S.jsx)(D.a,{}),H(t),Object(S.jsx)("div",{className:a.imageHover,children:Object(S.jsx)(k.a,{onClick:function(){return n()},className:a.removeIcon})})]})})},_=n(150),B="application/pdf",z=Object(u.a)((function(){return{fileInput:{background:"#fcfcfe",width:"100%",borderWidth:2,borderRadius:2,borderColor:"#eee",borderStyle:"dashed"},activeStyle:{borderColor:"#2196f3"},fileContainer:{padding:"30px 0",textAlign:"center",borderRadius:"4px",cursor:"pointer","& > svg":{verticalAlign:"sub",marginRight:"5px"}},uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},previewWrapper:{marginTop:"12px"}}}));t.a=function(e){var t=e.files,n=e.accept,d=void 0===n?"image/*":n,u=e.maxFiles,p=void 0===u?10:u,m=e.onDrop,g=e.disabled,h=e.name,y=e.loading,C=void 0!==y&&y,w=z(),I=Object(f.a)({onDrop:m,accept:d,maxFiles:p}),R=I.getRootProps,P=I.getInputProps,D=I.isDragActive,k=I.fileRejections,A=Object(_.d)();Object(v.useEffect)((function(){if(!x()(k)){var e=O()(k,"0.errors.0.message","");A({message:e,variant:"alert",alertSeverity:"error"})}}),[k]);var H=function(e){return function(){var n=Object(i.a)(t);n.splice(e,1),m(n)}};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(c.a,Object(a.a)(Object(a.a)({},R({className:Object(b.a)(w.fileInput,Object(r.a)({},w.activeStyle,D))})),{},{disabled:g,children:Object(S.jsxs)(o.a,{className:w.fileContainer,children:[Object(S.jsx)(j.a,{}),"Drop file here to upload"]})})),Object(S.jsx)("input",Object(a.a)(Object(a.a)({},P()),{},{name:h})),C?Object(S.jsx)(s.a,{item:!0,xs:12,children:Object(S.jsx)(l.a,{})}):Object(S.jsx)(s.a,{container:!0,spacing:1,className:w.previewWrapper,children:t.map((function(e,t){var n=e.type===B?N:F;return Object(S.jsx)(n,{file:e,onRemove:H(t)},e.name)}))})]})}},939:function(e,t,n){"use strict";n.r(t);var a=n(55),r=n(57),i=n(663),c=n(567),o=n(667),s=n(952),l=n(953),d=n(954),j=n(568),u=n(750),b=n(698),f=n(680),p=n(951),O=n(97),m=n.n(O),x=n(127),v=n.n(x),g=n(797),h=n(156),y=n(0),C=n(276),w=n(682),S=n(691),I=n(105),F=n(282),R=n(192),P=n(717),D=n(706),k=n(747),A=n(23),H=n(29),N=n(718),_=n(47),B=n(281),z=n(280),T=n(150),E=n(15),L=n(1),U={150:{variant:"outlined",color:"secondary"},200:{variant:"contained",color:"primary"},500:{variant:"contained",color:"primary"},800:{variant:"contained",color:"primary"},910:{variant:"text",color:"error"}},V=function(e){var t=e.action,n=e.onClick,a=e.disabled,r=t.action,i=t.next_step_id,c=U[i];return Object(L.jsx)(o.a,{item:!0,children:Object(L.jsx)(f.a,Object(E.a)(Object(E.a)({type:"button",onClick:n,disabled:a},c),{},{children:r}))})},$=_.a.offerSteps,q=[$.awaitingAdvisorApproval,$.paBeingCreated,$.reviewScarRequest],W=function(e){var t=e.offer,n=Object(g.a)(Object(h.d)(z.listOfferSteps),{fetchPolicy:"cache-first"}),a=n.loading,r=n.data,i=m()(r,"listOfferSteps",[]),c=+m()(t,"StepId",0);if(!q.includes(c))return Object(L.jsx)(L.Fragment,{});var s=function(e){return c===e},l=s($.paBeingCreated)&&!Object(P.b)(t,"SignedPurchaseAgreement"),d=s($.reviewScarRequest)&&!Object(P.b)(t,"SCAR");if(l||d)return Object(L.jsx)(L.Fragment,{});var j=m()(t,"OfferId"),u=i.find((function(e){return e.id===c})),b=Object(y.useMemo)((function(){var e=m()(u,"allowed_actions",[]);return e.length?Object(H.a)(e).reverse():e}),[u]),f=Object(T.d)(),p=Object(N.a)(Object(h.d)(B.updateOfferStep),{onCompleted:function(e){v()(e)||v()(e.updateOfferStep)||window.location.reload()},onError:function(e){f({message:m()(e,"message","Something went wrong"),variant:"alert",alertSeverity:"error"})}}),O=Object(A.a)(p,2),x=O[0],C=O[1].loading;return Object(L.jsxs)(L.Fragment,{children:[(C||a)&&Object(L.jsx)(R.a,{}),Object(L.jsx)(o.a,{container:!0,spacing:1,children:b.map((function(e){return Object(L.jsx)(V,{action:e,onClick:(t=e.next_step_id,function(){return x({variables:{OfferId:j,NewStepId:t}})}),disabled:C},"".concat(j,"-").concat(e.next_step_id));var t}))})]})},J="application/pdf",M=n(289),Q=n(557),Y=Object(Q.a)((function(e){return{downloadLink:{marginRight:e.spacing(2)}}})),Z=function(e){var t=e.submissionFiles,n=Y(),a=function(e,t,a){var r=e.find((function(e){return m()(e,["QuestionName"],"")===t})),i=m()(r,["Files","0","presignedUrl"]);return v()(i)?Object(L.jsx)(L.Fragment,{}):Object(L.jsx)(f.a,{variant:"outlined",color:"secondary",className:n.downloadLink,type:"button",onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?window.location.href=e:window.open(e,"_blank")}(i)},children:a})};return v()(t)?Object(L.jsx)(L.Fragment,{}):Object(L.jsxs)(L.Fragment,{children:[a(t,"fd_upload_buyer_preapproval_letter","Pre-Approval Letter"),a(t,"fd_upload_buyer_proof_of_funds","Proof of Funds"),a(t,"fundingtype_fund_proof","Proof of Funds")]})},G=n(565),K=n(948),X=n(949),ee=n(950),te=n(693),ne="Done",ae="In Process",re="OVERDUE",ie=function(e,t){var n,a,r=m()(e,["Contingencies","".concat(t,"DueDate")]);return r&&(n=Object(te.a)(r),a=Object(te.a)((new Date).toDateString())<=n?ae:re),"Yes"===m()(e,["Contingencies","".concat(t,"Removed")])&&(a=ne),{status:a,dueDate:n}},ce=function(e){var t=e.offer,n=function(e){return[Object(E.a)({name:"FinanceContingency",title:"Finance Contingency Removal"},ie(e,"FinanceContingency")),Object(E.a)({name:"InspectionContingency",title:"Inspection Contingency Removal"},ie(e,"InspectionContingency")),Object(E.a)({name:"SaleOfHomeContingency",title:"Homesale Contingency Removal"},ie(e,"SaleOfHomeContingency"))]}(t),a=m()(n,"AllRemoved",!1),r=m()(t,["PropertyData","FullAddress"]),i=m()(t,"StepId",0)<500;return v()(n)||a||i?Object(L.jsx)(L.Fragment,{}):Object(L.jsxs)(S.a,{title:"Contingencies Status",children:[Object(L.jsx)(G.a,{variant:"subtitle2",children:r}),Object(L.jsx)(s.a,{children:Object(L.jsxs)(l.a,{sx:{"& td":{borderBottom:"none"}},size:"small",children:[Object(L.jsx)(K.a,{children:Object(L.jsxs)(X.a,{children:[Object(L.jsx)(ee.a,{children:"Type"}),Object(L.jsx)(ee.a,{children:"Due Date"}),Object(L.jsx)(ee.a,{children:"Status"})]})}),Object(L.jsx)(d.a,{children:n.map((function(e){return Object(L.jsxs)(X.a,{children:[Object(L.jsx)(ee.a,{variant:"head",children:e.title}),Object(L.jsx)(ee.a,{variant:"head",children:e.dueDate||"n/a"}),Object(L.jsx)(ee.a,{variant:"head",children:e.status||"n/a"})]},e.title)}))})]})})]})},oe=n(707),se="SignedPurchaseAgreement",le="SCAR",de=function(e){var t=e.id,n=Object(g.a)(Object(h.d)(F.a.getOffer),{variables:{OfferId:t}}),a=n.loading,O=n.error,x=n.data,A=n.refetch,H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return{name:"getOfferDocPutUrls",query:F.a.getOfferDocPutUrls,generateVariables:function(n){return{Documents:n,OfferId:t,DocumentType:e}},refetch:A}},N=Object(T.e)(H(se)),B=N.files,z=N.onFilesChange,E=N.uploadFiles,U=N.isUploadLoading,V=Object(T.e)(H()),$=V.files,q=V.onFilesChange,Q=V.uploadFiles,Y=V.isUploadLoading,G=m()(x,"getOffer",{}),K=+m()(G,"StepId",0),X=m()(G,"OfferNo",""),ee=m()(G,"SubmissionFiles",[]),te=Object(r.a)();if(Object(y.useEffect)((function(){var e=m()(x,"getOffer",{}),t=m()(e,"SignedPurchaseAgreement")||[],n=m()(e,"SCAR")||[];v()(t)||z(t.map(M.b)),v()(n)||q(n.map(M.b))}),[x]),a)return Object(L.jsx)(R.a,{});if(O&&v()(G))return Object(L.jsx)(i.a,{severity:"error",sx:{color:te.palette.error.main},children:"Offer not found"});var ne=K===_.a.offerSteps.paBeingCreated,ae=K===_.a.offerSteps.reviewScarRequest,re=U||Y;return Object(L.jsxs)(C.a,{title:X,content:!1,secondary:Object(L.jsx)(W,{offer:G}),children:[Object(L.jsx)(c.a,{children:Object(L.jsxs)(o.a,{container:!0,spacing:I.b,children:[Object(L.jsxs)(o.a,{item:!0,lg:6,xs:12,children:[Object(L.jsx)(S.a,{title:"Offer Information",children:Object(L.jsx)(s.a,{children:Object(L.jsx)(l.a,{sx:{"& td":{borderBottom:"none"}},size:"small",children:Object(L.jsxs)(d.a,{children:[Object(L.jsx)(D.a,{data:G,source:"OfferNo",label:"Offer No"}),Object(L.jsx)(D.a,{data:G,source:"Property.PropertyData.FullAddress",label:"Property Address"}),Object(L.jsx)(D.a,{data:G,source:"Property.PropertyData.OwnerNames",label:"Sellers"}),Object(L.jsx)(D.a,{data:G,getValue:P.a,label:"Offer Price"}),Object(L.jsx)(D.a,{data:G,source:"Funding.PurchaseType",label:"Funding"}),Object(L.jsx)(D.a,{data:G,source:"Funding.LoanType",label:"Loan Type"}),Object(L.jsx)(D.a,{data:G,getValue:function(e){return Object(oe.a)(m()(e,"Funding.DownPayment"))},label:"Down Payment"}),Object(L.jsx)(D.a,{data:G,source:"Step.name",label:"Status"})]})})})}),Object(L.jsx)("br",{}),Object(L.jsx)(ce,{offer:G})]}),Object(L.jsx)(o.a,{item:!0,lg:6,xs:12,children:Object(L.jsxs)(o.a,{container:!0,direction:"column",spacing:I.b,children:[Object(L.jsx)(o.a,{item:!0,xs:12,children:Object(L.jsx)(S.a,{title:"Signed Purchase Agreement",children:Object(L.jsx)(k.a,{name:"PA",files:B,onDrop:z,accept:J,disabled:!ne})})}),Object(L.jsx)(o.a,{item:!0,xs:12,children:Object(L.jsx)(S.a,{title:"SCAR",children:Object(L.jsx)(k.a,{name:"SCAR",files:$,onDrop:q,accept:J,disabled:!ae})})})]})})]})}),Object(L.jsx)(j.a,{}),Object(L.jsx)(u.a,{children:Object(L.jsx)(o.a,{item:!0,xs:12,children:Object(L.jsx)(b.a,{direction:"row",justifyContent:"flex-end",children:Object(L.jsxs)(w.a,{children:[Object(L.jsx)(Z,{submissionFiles:ee}),Object(L.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",disabled:!ne&&!ae||re,onClick:function(){E(),Q()},children:re?Object(L.jsx)(p.a,{size:"1.5rem",color:"secondary"}):"Update"})]})})})})]})};t.default=function(){var e=Object(a.j)().id;return Object(L.jsx)(de,{id:e})}}}]);
//# sourceMappingURL=16.a4dacdc1.chunk.js.map