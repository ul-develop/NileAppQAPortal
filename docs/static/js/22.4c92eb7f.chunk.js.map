{"version":3,"sources":["views/application/offer/ListHeader.tsx","views/application/offer/OfferToolbar.tsx","views/application/offer/OfferList.tsx","views/pages/offer/ListPage.tsx","views/application/components/LoadMore/index.tsx","helpers/searchFilter.ts","views/application/components/SearchField/index.tsx","views/application/components/StatusSelector/index.tsx","views/application/components/SearchFilter/index.tsx"],"names":["headCells","id","numeric","disablePadding","label","align","ListHeader","TableHead","TableRow","map","headCell","TableCell","padding","sx","pr","useToolbarStyles","makeStyles","theme","root","paddingLeft","spacing","paddingRight","height","highlight","backgroundColor","alpha","palette","primary","main","action","activatedOpacity","title","flex","OfferToolbar","props","classes","onSearch","onTriggerSearch","statuses","search","setSearch","selectedStatuses","setSelectedStatuses","Toolbar","className","SearchFilter","useStyles","table","minWidth","OfferList","history","useHistory","showSnackBar","useSnackBar","useQuery","gql","graphql","getOffers","variables","PageIndex","PageSize","config","pagination","limit","fetchPolicy","notifyOnNetworkStatusChange","loading","error","data","fetchMore","listOfferSteps","loadingStatuses","statusesError","statusesData","useState","doSearch","setDoSearch","useLazyQuery","executeSearch","isSearching","searchData","rows","setRows","hasMore","setHasMore","page","setPage","useEffect","newData","newCount","_get","newTotal","isLoading","Loader","message","alertSeverity","searchHandler","pageIndex","getValidSearchQuery","query","statusIds","Query","trim","StepIds","Boolean","status","Id","Name","TableContainer","Table","size","TableBody","row","hover","tabIndex","component","OfferNo","getOfferPrice","Funding","PurchaseType","LoanType","formatCurrency","DownPayment","Step","messages","advisor","formatDate","CreatedAt","IconButton","color","onClick","OfferId","push","fontSize","_isEmpty","Grid","item","xs","Alert","icon","severity","LoadMore","onLoadMore","ListPage","MainCard","LoadMoreButton","withStyles","borderRadius","Button","toolbar","disabled","container","justifyContent","type","validStatues","undefined","searchControl","background","breakpoints","down","width","marginLeft","mode","dark","startAdornment","grey","resetButton","formControl","SearchField","FormControl","variant","OutlinedInput","name","value","onChange","e","target","placeholder","InputAdornment","position","stroke","endAdornment","inputProps","StatusSelector","Autocomplete","event","newValues","_uniqBy","fullWidth","multiple","limitTags","options","getOptionLabel","option","defaultValue","renderInput","params","TextField","multiline","form","onSubmit","preventDefault","direction","alignItems","lg"],"mappings":"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","file":"static/js/22.4c92eb7f.chunk.js","sourcesContent":["import { TableCell, TableHead, TableRow } from '@material-ui/core';\nimport { HeadCell } from '../../../types';\n\nconst headCells: HeadCell[] = [\n\t{\n\t\tid: 'OfferNo',\n\t\tnumeric: false,\n\t\tdisablePadding: false,\n\t\tlabel: 'No',\n\t},\n\t{\n\t\tid: 'PropertyData.FullAddress',\n\t\tnumeric: false,\n\t\tdisablePadding: false,\n\t\tlabel: 'Property Address',\n\t},\n\t{\n\t\tid: 'PropertyData.OwnerNames',\n\t\tnumeric: false,\n\t\tdisablePadding: false,\n\t\tlabel: 'Sellers',\n\t},\n\t{\n\t\tid: 'CounterOffer.SellerCounter.OfferPrice',\n\t\tnumeric: true,\n\t\tdisablePadding: false,\n\t\tlabel: 'Offer Price',\n\t},\n\t{\n\t\tid: 'Funding.PurchaseType',\n\t\tnumeric: false,\n\t\tdisablePadding: false,\n\t\tlabel: 'Funding',\n\t},\n\t{\n\t\tid: 'Funding.LoanType',\n\t\tnumeric: false,\n\t\tdisablePadding: false,\n\t\tlabel: 'Loan Type',\n\t},\n\t{\n\t\tid: 'Funding.DownPayment',\n\t\tnumeric: false,\n\t\tdisablePadding: false,\n\t\tlabel: 'Down Payment',\n\t},\n\t{\n\t\tid: 'Step.messages.advisor',\n\t\tnumeric: false,\n\t\tdisablePadding: false,\n\t\tlabel: 'Status',\n\t},\n\t{\n\t\tid: 'CreatedAt',\n\t\tnumeric: false,\n\t\tlabel: 'Created Date',\n\t\talign: 'left',\n\t},\n];\n\nconst ListHeader = () => (\n\t<TableHead>\n\t\t<TableRow>\n\t\t\t{headCells.map(headCell => (\n\t\t\t\t<TableCell\n\t\t\t\t\tkey={headCell.id}\n\t\t\t\t\talign='left'\n\t\t\t\t\tpadding={headCell.disablePadding ? 'none' : 'normal'}\n\t\t\t\t>\n\t\t\t\t\t{headCell.label}\n\t\t\t\t</TableCell>\n\t\t\t))}\n\t\t\t<TableCell align='center' sx={{ pr: 3 }}>\n\t\t\t\tAction\n\t\t\t</TableCell>\n\t\t</TableRow>\n\t</TableHead>\n);\n\nexport default ListHeader;\n","import { alpha, makeStyles } from '@material-ui/core/styles';\nimport { Toolbar } from '@material-ui/core';\nimport SearchFilter from '../components/SearchFilter';\nimport type { Props } from '../components/SearchFilter';\n\nconst useToolbarStyles = makeStyles(theme => ({\n\troot: {\n\t\tpaddingLeft: theme.spacing(2),\n\t\tpaddingRight: theme.spacing(1),\n\t\theight: '83px',\n\t},\n\thighlight: {\n\t\tbackgroundColor: alpha(\n\t\t\ttheme.palette.primary.main,\n\t\t\ttheme.palette.action.activatedOpacity\n\t\t),\n\t},\n\ttitle: {\n\t\tflex: '1 1 100%',\n\t},\n}));\n\nconst OfferToolbar = (props: Props) => {\n\tconst classes = useToolbarStyles();\n\tconst {\n\t\tonSearch,\n\t\tonTriggerSearch,\n\t\tstatuses,\n\t\tsearch,\n\t\tsetSearch,\n\t\tselectedStatuses,\n\t\tsetSelectedStatuses,\n\t} = props;\n\n\treturn (\n\t\t<Toolbar className={classes.root}>\n\t\t\t<SearchFilter\n\t\t\t\tonSearch={onSearch}\n\t\t\t\tonTriggerSearch={onTriggerSearch}\n\t\t\t\tstatuses={statuses}\n\t\t\t\tsearch={search}\n\t\t\t\tsetSearch={setSearch}\n\t\t\t\tselectedStatuses={selectedStatuses}\n\t\t\t\tsetSelectedStatuses={setSelectedStatuses}\n\t\t\t/>\n\t\t</Toolbar>\n\t);\n};\n\nexport default OfferToolbar;\n","import { useEffect, useState } from 'react';\nimport _get from 'lodash.get';\nimport _isEmpty from 'lodash.isempty';\nimport {\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableContainer,\n\tTableRow,\n\tAlert,\n\tIconButton,\n\tGrid,\n} from '@material-ui/core';\nimport EditTwoToneIcon from '@material-ui/icons/EditTwoTone';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useQuery, useLazyQuery, gql } from '@apollo/client';\nimport { useHistory } from 'react-router';\nimport { TOffer } from '../../../types';\nimport graphql from '../../../graphql';\n\nimport Loader from '../../../ui-component/Loader';\nimport Header from './ListHeader';\nimport LoadMore from '../components/LoadMore';\nimport config from '../../../config';\nimport { getOfferPrice } from '../../../helpers/offer';\nimport { formatCurrency } from '../../../helpers/currency';\nimport OfferToolbar from './OfferToolbar';\nimport { formatDate } from '../../../helpers/date';\nimport { getValidSearchQuery } from '../../../helpers/searchFilter';\nimport { useSnackBar } from '../../../hooks';\n\nconst useStyles = makeStyles(() => ({\n\ttable: {\n\t\tminWidth: '750px',\n\t},\n}));\n\nconst OfferList = () => {\n\tconst classes = useStyles();\n\tconst history = useHistory();\n\tconst showSnackBar = useSnackBar();\n\n\tconst { loading, error, data, fetchMore } = useQuery(gql(graphql.getOffers), {\n\t\tvariables: { PageIndex: 0, PageSize: config.pagination.limit },\n\t\tfetchPolicy: 'cache-first',\n\t\tnotifyOnNetworkStatusChange: true,\n\t});\n\n\tconst {\n\t\tloading: loadingStatuses,\n\t\terror: statusesError,\n\t\tdata: statusesData,\n\t} = useQuery(gql(graphql.listOfferSteps));\n\n\tconst [doSearch, setDoSearch] = useState(false);\n\tconst [search, setSearch] = useState('');\n\tconst [selectedStatuses, setSelectedStatuses] = useState([]);\n\tconst [executeSearch, { loading: isSearching, data: searchData }] =\n\t\tuseLazyQuery(gql(graphql.getOffers));\n\n\tconst [rows, setRows] = useState<TOffer[]>([]);\n\tconst [hasMore, setHasMore] = useState<boolean>(false);\n\tconst [page, setPage] = useState<number>(0);\n\n\tuseEffect(() => {\n\t\tconst newData = doSearch ? searchData : data;\n\t\tconst newCount = _get(newData, 'getOffers.Count', 0);\n\t\tconst newTotal = _get(newData, 'getOffers.Total', 0);\n\t\tsetHasMore(newCount < newTotal);\n\t\tsetPage(_get(newData, 'getOffers.PageIndex') || 0);\n\t\tsetRows(_get(newData, 'getOffers.Items') || []);\n\t}, [data, searchData, doSearch]);\n\n\tconst isLoading = loading || isSearching;\n\n\tif ((isLoading || loadingStatuses) && !data) return <Loader />;\n\n\tif (error || statusesError) {\n\t\tshowSnackBar({\n\t\t\tmessage: _get(error, 'message', 'Something went wrong'),\n\t\t\talertSeverity: 'error',\n\t\t});\n\t}\n\n\tconst editOffer = (id: string) => {\n\t\thistory.push(`/offer/${id}`);\n\t};\n\n\tconst searchHandler = (pageIndex = 0) => {\n\t\tconst { query, statusIds } = getValidSearchQuery({\n\t\t\tsearch,\n\t\t\tselectedStatuses,\n\t\t});\n\t\tif (query) {\n\t\t\texecuteSearch({\n\t\t\t\tvariables: {\n\t\t\t\t\tPageIndex: pageIndex,\n\t\t\t\t\tPageSize: config.pagination.limit,\n\t\t\t\t\tQuery: query.trim(),\n\t\t\t\t\tStepIds: statusIds,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tsetDoSearch(Boolean(query));\n\t};\n\n\tconst loadMore = () => {\n\t\tif (doSearch) {\n\t\t\tsearchHandler(page + 1);\n\t\t\treturn;\n\t\t}\n\t\tfetchMore({\n\t\t\tvariables: { PageIndex: page + 1, PageSize: config.pagination.limit },\n\t\t});\n\t};\n\n\tconst statuses = _get(statusesData, ['listOfferSteps'], []).map(\n\t\t(status: Object) => ({\n\t\t\tId: _get(status, 'id'),\n\t\t\tName: _get(status, 'messages.advisor'),\n\t\t})\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{isSearching && <Loader />}\n\t\t\t<OfferToolbar\n\t\t\t\tonSearch={searchHandler}\n\t\t\t\tonTriggerSearch={setDoSearch}\n\t\t\t\tstatuses={statuses}\n\t\t\t\tsearch={search}\n\t\t\t\tsetSearch={setSearch}\n\t\t\t\tselectedStatuses={selectedStatuses}\n\t\t\t\tsetSelectedStatuses={setSelectedStatuses}\n\t\t\t/>\n\t\t\t<TableContainer>\n\t\t\t\t<Table className={classes.table} aria-labelledby='tableTitle' size='small'>\n\t\t\t\t\t<Header />\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{rows.map(row => {\n\t\t\t\t\t\t\tif (typeof row === 'number') return null;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} key={row.OfferId}>\n\t\t\t\t\t\t\t\t\t<TableCell component='th'>{row.OfferNo}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell align='left'>\n\t\t\t\t\t\t\t\t\t\t{_get(row, 'PropertyData.FullAddress', '')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell align='left'>\n\t\t\t\t\t\t\t\t\t\t{_get(row, 'PropertyData.OwnerNames', '')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell align='left'>{getOfferPrice(row)}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell align='left'>{row.Funding?.PurchaseType}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell align='left'>{row.Funding?.LoanType}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell align='left'>\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(row.Funding?.DownPayment)}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell sx={{ pr: 3 }} align='left'>\n\t\t\t\t\t\t\t\t\t\t{row.Step?.messages?.advisor}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell align='left'>{formatDate(row.CreatedAt)}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell align='center' sx={{ pr: 3 }}>\n\t\t\t\t\t\t\t\t\t\t<IconButton color='primary' onClick={() => editOffer(row.OfferId)}>\n\t\t\t\t\t\t\t\t\t\t\t<EditTwoToneIcon sx={{ fontSize: '1.3rem' }} />\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</TableContainer>\n\t\t\t{_isEmpty(rows) && !isLoading && (\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<Alert icon={false} severity='info'>\n\t\t\t\t\t\tNo Records found\n\t\t\t\t\t</Alert>\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t\t{hasMore && <LoadMore onLoadMore={loadMore} loading={isLoading} />}\n\t\t</>\n\t);\n};\n\nexport default OfferList;\n","// material-ui\nimport MainCard from '../../../ui-component/cards/MainCard';\n\n// project imports\nimport OfferList from '../../application/offer/OfferList';\n\nconst ListPage = () => (\n\t<MainCard title='Offers List'>\n\t\t<OfferList />\n\t</MainCard>\n);\n\nexport default ListPage;\n","import { Grid, Button, CircularProgress } from '@material-ui/core';\nimport { IconChevronDown } from '@tabler/icons';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nconst LoadMoreButton = withStyles({\n\troot: {\n\t\tborderRadius: '50%',\n\t\tminWidth: '0',\n\t\tpadding: '12px',\n\t},\n})(Button);\n\ntype Props = {\n\tonLoadMore: Function;\n\tloading: boolean;\n\tdisabled?: boolean;\n};\n\nconst useStyles = makeStyles(() => ({\n\ttoolbar: {\n\t\tpadding: '24px 16px 2px',\n\t},\n}));\n\nconst LoadMore = ({ onLoadMore, disabled, loading }: Props) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Grid container className={classes.toolbar} justifyContent='center'>\n\t\t\t<LoadMoreButton\n\t\t\t\ttype='button'\n\t\t\t\tonClick={() => onLoadMore()}\n\t\t\t\tdisabled={disabled || loading}\n\t\t\t>\n\t\t\t\t{loading ? <CircularProgress size={24} /> : <IconChevronDown />}\n\t\t\t</LoadMoreButton>\n\t\t</Grid>\n\t);\n};\n\nexport default LoadMore;\n","import _get from 'lodash.get';\nimport _isEmpty from 'lodash.isempty';\n\ntype SearchQuery = {\n\tsearch: string;\n\tselectedStatuses: Array<Object>;\n};\n\nexport const getValidSearchQuery = ({\n\tsearch,\n\tselectedStatuses,\n}: SearchQuery) => {\n\tconst validStatues = selectedStatuses.map(status => _get(status, 'Id'));\n\tconst searchText = !_isEmpty(validStatues) && !search ? '*' : search;\n\treturn {\n\t\tquery: searchText,\n\t\tstatusIds: _isEmpty(validStatues) ? undefined : validStatues,\n\t};\n};\n","import { makeStyles } from '@material-ui/core/styles';\nimport {\n\tInputAdornment,\n\tOutlinedInput,\n\tIconButton,\n\tFormControl,\n} from '@material-ui/core';\nimport { IconSearch, IconX } from '@tabler/icons';\n\nconst useStyles = makeStyles(theme => ({\n\tsearchControl: {\n\t\tpaddingRight: '16px',\n\t\tpaddingLeft: '16px',\n\t\t'& input': {\n\t\t\tbackground: 'transparent !important',\n\t\t\tpaddingLeft: '5px !important',\n\t\t},\n\t\t[theme.breakpoints.down('lg')]: {\n\t\t\twidth: '250px',\n\t\t},\n\t\t[theme.breakpoints.down('md')]: {\n\t\t\twidth: '100%',\n\t\t\tmarginLeft: '4px',\n\t\t\tbackground: theme.palette.mode === 'dark' ? theme.palette.dark[800] : '#fff',\n\t\t},\n\t},\n\tstartAdornment: {\n\t\tfontSize: '1rem',\n\t\tcolor: theme.palette.grey[500],\n\t},\n\tresetButton: {\n\t\twidth: '22px',\n\t\theight: '22px',\n\t},\n\tformControl: {\n\t\twidth: '100%',\n\t},\n}));\n\nexport type Props = {\n\tsearch: string;\n\tsetSearch: (t: string) => void;\n};\n\nconst SearchField = ({ search, setSearch }: Props) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<FormControl variant='outlined' className={classes.formControl}>\n\t\t\t<OutlinedInput\n\t\t\t\tclassName={classes.searchControl}\n\t\t\t\tname='search'\n\t\t\t\tvalue={search}\n\t\t\t\tonChange={e => {\n\t\t\t\t\tsetSearch(e.target.value);\n\t\t\t\t}}\n\t\t\t\tplaceholder='Search'\n\t\t\t\tstartAdornment={\n\t\t\t\t\t<InputAdornment position='start'>\n\t\t\t\t\t\t<IconSearch stroke={1.5} size='1rem' className={classes.startAdornment} />\n\t\t\t\t\t</InputAdornment>\n\t\t\t\t}\n\t\t\t\tendAdornment={\n\t\t\t\t\tsearch ? (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\tclassName={classes.resetButton}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetSearch('');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconX stroke={1.5} size='1rem' />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<></>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\taria-describedby='search-helper-text'\n\t\t\t\tinputProps={{\n\t\t\t\t\t'aria-label': 'weight',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</FormControl>\n\t);\n};\n\nexport default SearchField;\n","import { FormControl, Autocomplete, TextField } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport _get from 'lodash.get';\nimport _uniqBy from 'lodash.uniqby';\n\nconst TAG_LIMITATION = 1;\n\nexport type Props = {\n\tstatuses: Array<Object>;\n\tselectedStatuses: Array<number | string>;\n\tsetSelectedStatuses: Function;\n};\n\nconst useStyles = makeStyles(() => ({\n\tformControl: {\n\t\twidth: '100%',\n\t},\n}));\n\nconst StatusSelector = ({\n\tselectedStatuses,\n\tsetSelectedStatuses,\n\tstatuses,\n}: Props) => {\n\tconst classes = useStyles();\n\treturn (\n\t\t<FormControl variant='outlined' className={classes.formControl}>\n\t\t\t<Autocomplete\n\t\t\t\tvalue={selectedStatuses}\n\t\t\t\tonChange={(event, newValues) => {\n\t\t\t\t\tsetSelectedStatuses(_uniqBy(newValues, 'Id'));\n\t\t\t\t}}\n\t\t\t\tfullWidth\n\t\t\t\tmultiple\n\t\t\t\tlimitTags={TAG_LIMITATION}\n\t\t\t\toptions={statuses}\n\t\t\t\tgetOptionLabel={option => _get(option, 'Name', '')}\n\t\t\t\tdefaultValue={[]}\n\t\t\t\trenderInput={params => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tlabel='Status'\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</FormControl>\n\t);\n};\n\nexport default StatusSelector;\n","import React from 'react';\nimport { Button, Grid } from '@material-ui/core';\nimport _isEmpty from 'lodash.isempty';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchField from '../SearchField';\nimport type { Props as SearchFieldProps } from '../SearchField';\nimport StatusSelector from '../StatusSelector';\nimport type { Props as StatusSelectorProps } from '../StatusSelector';\n\nexport type Props = Omit<SearchFieldProps, 'handleReset'> &\n\tStatusSelectorProps & { onSearch: Function; onTriggerSearch: Function };\n\nconst useStyles = makeStyles(() => ({\n\tform: {\n\t\twidth: '100%',\n\t},\n}));\n\nconst SearchFilter = ({\n\tonSearch,\n\tonTriggerSearch,\n\tstatuses,\n\tsearch,\n\tsetSearch,\n\tselectedStatuses,\n\tsetSelectedStatuses,\n}: Props) => {\n\tconst classes = useStyles();\n\n\tconst onSubmit = (e: React.SyntheticEvent) => {\n\t\te.preventDefault();\n\t\tonSearch();\n\t};\n\n\treturn (\n\t\t<form onSubmit={onSubmit} className={classes.form}>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection='row'\n\t\t\t\tjustifyContent='flex-start'\n\t\t\t\talignItems='center'\n\t\t\t\tspacing={1}\n\t\t\t>\n\t\t\t\t<Grid item xs={12} lg={4}>\n\t\t\t\t\t<SearchField search={search} setSearch={setSearch} />\n\t\t\t\t</Grid>\n\t\t\t\t{!_isEmpty(statuses) && (\n\t\t\t\t\t<Grid item xs={12} lg={6}>\n\t\t\t\t\t\t<StatusSelector\n\t\t\t\t\t\t\tselectedStatuses={selectedStatuses}\n\t\t\t\t\t\t\tsetSelectedStatuses={setSelectedStatuses}\n\t\t\t\t\t\t\tstatuses={statuses}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t)}\n\t\t\t\t<Grid item xs={12} lg={1}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t>\n\t\t\t\t\t\tSearch\n\t\t\t\t\t</Button>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12} lg={1}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetSearch('');\n\t\t\t\t\t\t\tsetSelectedStatuses([]);\n\t\t\t\t\t\t\tonTriggerSearch(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tReset\n\t\t\t\t\t</Button>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</form>\n\t);\n};\n\nexport default SearchFilter;\n"],"sourceRoot":""}