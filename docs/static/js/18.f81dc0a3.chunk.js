(this["webpackJsonpnile-portal"]=this["webpackJsonpnile-portal"]||[]).push([[18],{1102:function(e,t,r){"use strict";r.r(t);var a=r(55),n=r(57),i=r(828),c=r(733),o=r(831),s=r(1112),l=r(1113),d=r(1114),j=r(734),u=r(1071),b=r(941),f=r(844),p=r(1110),O=r(96),x=r.n(O),m=r(122),v=r.n(m),g=r(955),h=r(155),y=r(0),S=r(308),w=r(848),C=r(860),I=r(103),R=r(846),k=r(196),A=r(879),P=r(870),F=r(906),H=r(22),N=r(30),D=r(943),B=r(47),z=r(847),T=r(145),_=r(13),E=r(1),U={150:{variant:"outlined",color:"secondary"},200:{variant:"contained",color:"primary"},500:{variant:"contained",color:"primary"},800:{variant:"contained",color:"primary"},910:{variant:"text",color:"error"}},$=function(e){var t=e.action,r=e.onClick,a=e.disabled,n=t.action,i=t.next_step_id,c=U[i];return Object(E.jsx)(o.a,{item:!0,children:Object(E.jsx)(f.a,Object(_.a)(Object(_.a)({type:"button",onClick:r,disabled:a},c),{},{children:n}))})},q=B.a.offerSteps,L=[q.awaitingAdvisorApproval,q.paBeingCreated,q.reviewScarRequest],V=function(e){var t=e.offer,r=Object(g.a)(Object(h.a)(R.listOfferSteps),{fetchPolicy:"cache-first"}),a=r.loading,n=r.data,i=x()(n,"listOfferSteps",[]),c=+x()(t,"StepId",0);if(!L.includes(c))return Object(E.jsx)(E.Fragment,{});var s=function(e){return c===e},l=s(q.paBeingCreated)&&!Object(A.b)(t,"SignedPurchaseAgreement"),d=s(q.reviewScarRequest)&&!Object(A.b)(t,"SCAR");if(l||d)return Object(E.jsx)(E.Fragment,{});var j=x()(t,"OfferId"),u=i.find((function(e){return e.id===c})),b=Object(y.useMemo)((function(){var e=x()(u,"allowed_actions",[]);return e.length?Object(N.a)(e).reverse():e}),[u]),f=Object(T.d)(),p=Object(D.a)(Object(h.a)(z.updateOfferStep),{onCompleted:function(e){v()(e)||v()(e.updateOfferStep)||window.location.reload()},onError:function(e){f({message:x()(e,"message","Something went wrong"),variant:"alert",alertSeverity:"error"})}}),O=Object(H.a)(p,2),m=O[0],S=O[1].loading;return Object(E.jsxs)(E.Fragment,{children:[(S||a)&&Object(E.jsx)(k.a,{}),Object(E.jsx)(o.a,{container:!0,spacing:1,children:b.map((function(e){return Object(E.jsx)($,{action:e,onClick:(t=e.next_step_id,function(){return m({variables:{OfferId:j,NewStepId:t}})}),disabled:S},"".concat(j,"-").concat(e.next_step_id));var t}))})]})},J="application/pdf",M=r(313),W="SignedPurchaseAgreement",G="SCAR",K=function(e){var t=e.id,r=Object(g.a)(Object(h.a)(R.getOffer),{variables:{OfferId:t}}),a=r.loading,O=r.error,m=r.data,H=r.refetch,N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return{name:"getOfferDocPutUrls",query:R.getOfferDocPutUrls,generateVariables:function(r){return{Documents:r,OfferId:t,DocumentType:e}},refetch:H}},D=Object(T.e)(N(W)),z=D.files,_=D.onFilesChange,U=D.uploadFiles,$=D.isUploadLoading,q=Object(T.e)(N()),L=q.files,K=q.onFilesChange,Q=q.uploadFiles,X=q.isUploadLoading,Y=x()(m,"getOffer",{}),Z=+x()(Y,"StepId",0),ee=x()(Y,"OfferNo",""),te=Object(n.a)();if(Object(y.useEffect)((function(){var e=x()(m,"getOffer",{}),t=x()(e,"SignedPurchaseAgreement")||[],r=x()(e,"SCAR")||[];v()(t)||_(t.map(M.b)),v()(r)||K(r.map(M.b))}),[m]),a)return Object(E.jsx)(k.a,{});if(O&&v()(Y))return Object(E.jsx)(i.a,{severity:"error",sx:{color:te.palette.error.main},children:"Offer not found"});var re=Z===B.a.offerSteps.paBeingCreated,ae=Z===B.a.offerSteps.reviewScarRequest,ne=$||X;return Object(E.jsxs)(S.a,{title:ee,content:!1,secondary:Object(E.jsx)(V,{offer:Y}),children:[Object(E.jsx)(c.a,{children:Object(E.jsxs)(o.a,{container:!0,spacing:I.b,children:[Object(E.jsx)(o.a,{item:!0,lg:6,xs:12,children:Object(E.jsx)(C.a,{title:"Offer Information",children:Object(E.jsx)(s.a,{children:Object(E.jsx)(l.a,{sx:{"& td":{borderBottom:"none"}},size:"small",children:Object(E.jsxs)(d.a,{children:[Object(E.jsx)(P.a,{data:Y,source:"OfferNo",label:"Offer No"}),Object(E.jsx)(P.a,{data:Y,source:"PropertyData.FullAddress",label:"Property Address"}),Object(E.jsx)(P.a,{data:Y,source:"PropertyData.OwnerNames",label:"Sellers"}),Object(E.jsx)(P.a,{data:Y,getValue:A.a,label:"Offer Price"}),Object(E.jsx)(P.a,{data:Y,source:"Funding.PurchaseType",label:"Funding"}),Object(E.jsx)(P.a,{data:Y,source:"Funding.LoanType",label:"Loan Type"}),Object(E.jsx)(P.a,{data:Y,source:"Funding.DownPayment",label:"Down Payment"}),Object(E.jsx)(P.a,{data:Y,source:"Step.name",label:"Status"})]})})})})}),Object(E.jsx)(o.a,{item:!0,lg:6,xs:12,children:Object(E.jsxs)(o.a,{container:!0,direction:"column",spacing:I.b,children:[Object(E.jsx)(o.a,{item:!0,xs:12,children:Object(E.jsx)(C.a,{title:"Signed Purchase Agreement",children:Object(E.jsx)(F.a,{name:"PA",files:z,onDrop:_,accept:J,disabled:!re})})}),Object(E.jsx)(o.a,{item:!0,xs:12,children:Object(E.jsx)(C.a,{title:"SCAR",children:Object(E.jsx)(F.a,{name:"SCAR",files:L,onDrop:K,accept:J,disabled:!ae})})})]})})]})}),Object(E.jsx)(j.a,{}),Object(E.jsx)(u.a,{children:Object(E.jsx)(o.a,{item:!0,xs:12,children:Object(E.jsx)(b.a,{direction:"row",justifyContent:"flex-end",children:Object(E.jsx)(w.a,{children:Object(E.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",disabled:!re&&!ae||ne,onClick:function(){U(),Q()},children:ne?Object(E.jsx)(p.a,{size:"1.5rem",color:"secondary"}):"Update"})})})})})]})};t.default=function(){var e=Object(a.j)().id;return Object(E.jsx)(K,{id:e})}},848:function(e,t,r){"use strict";var a=r(22),n=r(0),i=r.n(n),c=r(1074),o=r(822),s=r(1),l=i.a.forwardRef((function(e,t){var r,n,i=e.children,l=e.type,d=e.direction,j=e.offset,u=e.scale;switch(d){case"up":case"left":r=j,n=0;break;case"right":case"down":default:r=0,n=j}var b=Object(c.a)(r,n),f=Object(a.a)(b,2),p=f[0],O=f[1],x=Object(c.a)(r,n),m=Object(a.a)(x,2),v=m[0],g=m[1];switch(l){case"rotate":return Object(s.jsx)(o.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:i});case"slide":return"up"===d||"down"===d?Object(s.jsx)(o.a.div,{ref:t,animate:{y:void 0!==v?v:""},onHoverEnd:function(){return g()},onHoverStart:function(){return g()},children:i}):Object(s.jsx)(o.a.div,{ref:t,animate:{x:void 0!==p?p:""},onHoverEnd:function(){return O()},onHoverStart:function(){return O()},children:i});case"scale":default:return Object(s.jsx)(o.a.div,{ref:t,whileHover:{scale:null===u||void 0===u?void 0:u.hover},whileTap:{scale:null===u||void 0===u?void 0:u.tap},children:i})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=l},860:function(e,t,r){"use strict";var a=r(13),n=r(146),i=r(57),c=r(732),o=r(465),s=r(731),l=r(734),d=r(733),j=r(1),u=["children","content","contentClass","darkTitle","secondary","sx","title"],b=function(e){var t=e.children,r=e.content,b=e.contentClass,f=e.darkTitle,p=e.secondary,O=e.sx,x=void 0===O?{}:O,m=e.title,v=Object(n.a)(e,u),g=Object(i.a)();return Object(j.jsxs)(c.a,Object(a.a)(Object(a.a)({sx:Object(a.a)({border:"1px solid",borderColor:"dark"===g.palette.mode?g.palette.dark.light+15:g.palette.primary.light,":hover":{boxShadow:"dark"===g.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},x)},v),{},{children:[!f&&m&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h5",children:m}),action:p}),f&&m&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h4",children:m}),action:p}),m&&Object(j.jsx)(l.a,{sx:{opacity:1,borderColor:"dark"===g.palette.mode?g.palette.dark.light+15:g.palette.primary.light}}),r&&Object(j.jsx)(d.a,{sx:{p:2.5},className:b||"",children:t}),!r&&t]}))};b.defaultProps={content:!0},t.a=b},870:function(e,t,r){"use strict";var a=r(96),n=r.n(a),i=r(1108),c=r(1109),o=r(1);t.a=function(e){var t=e.data,r=e.source,a=void 0===r?"":r,s=e.label,l=e.getValue,d=e.defaultValue;return Object(o.jsxs)(i.a,{children:[Object(o.jsx)(c.a,{variant:"head",children:s}),Object(o.jsx)(c.a,{children:l?l(t):n()(t,a)||d||""})]})}},879:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return j}));var a=r(96),n=r.n(a),i=r(122),c=r.n(i),o=r(47),s=r(880),l=o.a.offerSteps,d=function(e){var t;return(t=+n()(e,["Step","id"])===l.counteredBySeller?n()(e,["CounterOffer","SellerCounter","OfferPrice"]):n()(e,["CounterOffer","BuyerCounter","OfferPrice"]))?Object(s.a)(t):""},j=function(e,t){return!c()(n()(e,t))}},880:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(47),n=function(e){return"".concat(e?new Intl.NumberFormat(a.a.locate.country,{style:"currency",currency:a.a.locate.currency}).format(e):"")}},906:function(e,t,r){"use strict";var a=r(13),n=r(12),i=r(30),c=r(844),o=r(1069),s=r(831),l=r(898),d=r.n(l),j=r(730),u=r(16),b=r(905),f=r(96),p=r.n(f),O=r(122),x=r.n(O),m=r(0),v=r(1072),g=r(942),h=r(731),y=r(287),S=r.n(y),w=r(1),C=Object(j.a)((function(){return{uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),I=function(e){var t=e.file,r=e.onRemove,a=C();return t.preview?Object(w.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(w.jsxs)("div",{className:a.uploadImage,children:[Object(w.jsx)(v.a,{component:"img",src:t.preview,title:"file"}),Object(w.jsx)("div",{className:a.imageHover,children:Object(w.jsx)(g.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return r()},children:Object(w.jsx)(S.a,{})})})]})}):Object(w.jsx)(s.a,{item:!0,xs:12,alignContent:"center",alignItems:"center",children:Object(w.jsxs)("div",{className:a.name,children:[Object(w.jsx)(h.a,{children:t.name}),Object(w.jsx)("div",{className:a.imageHover,children:Object(w.jsx)(g.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return r()},children:Object(w.jsx)(S.a,{})})})]})})},R=r(1073),k=r(723),A=r(1066),P=r(1067),F=Object(k.a)((function(e){return{uploadFile:{position:"relative",overflow:"hidden",display:"flex",alignItems:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1,cursor:"pointer"}},imageHover:{opacity:0},removeButton:{margin:"auto"},removeIcon:{color:e.palette.primary.main},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),H=function(e){var t=e.preview,r=e.name,n=x()(t)?"":{component:R.a,href:t,target:"_blank"};return Object(w.jsx)(h.a,Object(a.a)(Object(a.a)({variant:"body2",color:"primary",display:"block"},n),{},{children:r}))},N=function(e){var t=e.file,r=e.onRemove,a=F();return Object(w.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(w.jsxs)("div",{className:a.uploadFile,children:[Object(w.jsx)(A.a,{}),H(t),Object(w.jsx)("div",{className:a.imageHover,children:Object(w.jsx)(P.a,{onClick:function(){return r()},className:a.removeIcon})})]})})},D=r(145),B="application/pdf",z=Object(j.a)((function(){return{fileInput:{background:"#fcfcfe",width:"100%",marginBottom:"12px",borderWidth:2,borderRadius:2,borderColor:"#eee",borderStyle:"dashed"},activeStyle:{borderColor:"#2196f3"},fileContainer:{padding:"30px 0",textAlign:"center",borderRadius:"4px",cursor:"pointer","& > svg":{verticalAlign:"sub",marginRight:"5px"}},uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"}}}));t.a=function(e){var t=e.files,r=e.accept,l=void 0===r?"image/*":r,j=e.maxFiles,f=void 0===j?10:j,O=e.onDrop,v=e.disabled,g=e.name,h=z(),y=Object(b.a)({onDrop:O,accept:l,maxFiles:f}),S=y.getRootProps,C=y.getInputProps,R=y.isDragActive,k=y.fileRejections,A=Object(D.d)();Object(m.useEffect)((function(){if(!x()(k)){var e=p()(k,"0.errors.0.message","");A({message:e,variant:"alert",alertSeverity:"error"})}}),[k]);var P=function(e){return function(){var r=Object(i.a)(t);r.splice(e,1),O(r)}};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(c.a,Object(a.a)(Object(a.a)({},S({className:Object(u.a)(h.fileInput,Object(n.a)({},h.activeStyle,R))})),{},{disabled:v,children:Object(w.jsxs)(o.a,{className:h.fileContainer,children:[Object(w.jsx)(d.a,{}),"Drop file here to upload"]})})),Object(w.jsx)("input",Object(a.a)(Object(a.a)({},C()),{},{name:g})),Object(w.jsx)(s.a,{container:!0,spacing:1,children:t.map((function(e,t){var r=e.type===B?N:I;return Object(w.jsx)(r,{file:e,onRemove:P(t)},e.name)}))})]})}}}]);
//# sourceMappingURL=18.f81dc0a3.chunk.js.map