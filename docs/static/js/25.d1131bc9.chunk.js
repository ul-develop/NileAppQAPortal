(this["webpackJsonpnile-portal"]=this["webpackJsonpnile-portal"]||[]).push([[25],{1117:function(e,t,n){"use strict";n.r(t);var r=n(302),a=n(52),c=n.n(a),i=n(95),l=n(20),o=n(9),s=n(906),d=n(858),b=n(154),j=n(848),u=n(590),h=n(60),O=n(702),m=n(1133),f=n(1134),p=n(1135),x=n(1130),g=n(1131),v=n(1058),y=n(723),C=n(1101),k=n(117),F=n.n(k),S=n(28),w=n.n(S),T=n(58),I=n(56),N=n(807),A=n.n(N),D=(n(0),n(37)),R=n(159),P=n(210),M=n(1129),B=n(1125),L=n(2),q=[{id:"Title",numeric:!1,label:"Title",align:"left",disablePadding:!1},{id:"Category",numeric:!1,label:"Category",align:"left",disablePadding:!1},{id:"FormType",numeric:!1,label:"Form Type",align:"left"},{id:"CreatedAt",numeric:!1,label:"Created Date",align:"left"},{id:"UpdatedAt",numeric:!1,label:"Updated Date",align:"left"}],z=Object(u.a)((function(){return{sortSpan:Object(o.a)({},C.a)}})),U=function(e){var t=z(),n=e.onSelectAllClick,r=e.order,a=e.orderBy,c=e.numSelected,i=e.rowCount,l=e.onRequestSort,o=void 0===l?function(){}:l;return Object(L.jsx)(M.a,{children:Object(L.jsxs)(x.a,{children:[Object(L.jsx)(g.a,{padding:"checkbox",sx:{pl:3},children:Object(L.jsx)(v.a,{color:"primary",indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),q.map((function(e){return Object(L.jsx)(g.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id?r:void 0,children:Object(L.jsxs)(B.a,{active:a===e.id,direction:a===e.id?r:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,a===e.id?Object(L.jsx)("span",{className:t.sortSpan,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var n})),Object(L.jsx)(g.a,{sortDirection:!1,align:"center",sx:{pr:3},children:"Action"})]})})},J=function(e,t,n){return w()(t,n)<w()(e,n)?-1:w()(t,n)>w()(e,n)?1:0},W=n(762),Y=n(305),_=n(308),E=n(103),G=n(14),H=n(26),K=n(17),Q=n(718),V=n(708),X=n(600),Z=n(1062),$=n(847),ee=n(806),te=n.n(ee),ne=n(805),re=n.n(ne),ae=Object(u.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},highlight:{backgroundColor:Object(H.a)(e.palette.primary.main,e.palette.action.activatedOpacity)},title:{flex:"1 1 100%"}}})),ce=function(e){var t=ae(),n=e.numSelected,r=e.onDelete,a=e.onCreate;return Object(L.jsx)(Q.a,{className:Object(K.a)(t.root,Object(G.a)({},t.highlight,n>0)),children:Object(L.jsxs)(V.a,{container:!0,justifyContent:"space-between",alignItems:"center",spacing:2,children:[Object(L.jsx)(V.a,{item:!0,xs:12,sm:6,children:n>0&&Object(L.jsxs)(X.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]})}),Object(L.jsx)(V.a,{item:!0,xs:12,sm:6,children:Object(L.jsx)(V.a,{container:!0,justifyContent:"flex-end",alignItems:"center",children:n>0?Object(L.jsx)(Z.a,{title:"Delete",children:Object(L.jsx)(y.a,{onClick:r,children:Object(L.jsx)(re.a,{})})}):Object(L.jsx)(Z.a,{title:"Create",children:Object(L.jsx)($.a,{color:"primary","aria-label":"add",sx:{boxShadow:"none",ml:1,width:"48px",height:"48px"},onClick:a,children:Object(L.jsx)(te.a,{})})})})})]})})},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var n=w()(t,"id"),r=w()(t,"Name",n);return Object(o.a)(Object(o.a)({},e),{},Object(G.a)({},n,r))}),{})},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var n=w()(t,"id"),r=w()(t,"Title",n);return Object(o.a)(Object(o.a)({},e),{},Object(G.a)({},n,{categoryName:r,formTypes:ie(w()(t,"FormTypes",[]))}))}),{})},oe=n(41),se=Object(u.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},sortSpan:Object(o.a)({},C.a)}})),de=function(){var e=Object(d.a)(Object(b.d)(P.a.listForms),{variables:{limit:D.a.pagination.limit},fetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0}),t=e.loading,n=e.error,r=e.data,a=e.fetchMore,u=Object(d.a)(Object(b.d)(P.a.listFormCategories)).data,C=Object(j.a)(Object(b.d)(Y.deleteForm),{}),k=Object(l.a)(C,2),S=k[0],N=k[1],M=N.loading,B=N.error,q=w()(r,["listForms","items"],[]),z=w()(r,"listForms.nextToken",void 0),G=Object(h.a)(),H=se(),K=Object(E.b)("CreatedAt"),Q=K.order,V=K.orderBy,X=K.handleRequestSort,Z=Object(E.d)("FormId"),$=Z.selected,ee=Z.isSelected,te=Z.handleSelect,ne=Z.handleSelectAll,re=Z.clearSelected,ae=Object(T.h)();if((t||M)&&!r)return Object(L.jsx)(R.a,{});if(n||F()(r)||B)return Object(L.jsx)(O.a,{severity:"error",sx:{color:G.palette.error.main},children:"Something went wrong!"});var ie=function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,r,a,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=2;break}return e.abrupt("return");case 2:t=!1,n=!1,e.prev=4,a=c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.value,e.next=3,S({variables:{FormId:t},update:function(e){e.modify({fields:{listForms:function(e,n){var r=n.readField,a=e.items.filter((function(e){return t!==r("FormId",e)}));return Object(o.a)(Object(o.a)({},e),{},{items:a})}}})}});case 3:case"end":return e.stop()}}),e)})),i=Object(s.a)($);case 7:return e.next=9,i.next();case 9:if(!(t=!(l=e.sent).done)){e.next=14;break}return e.delegateYield(a(),"t0",11);case 11:t=!1,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t1=e.catch(4),n=!0,r=e.t1;case 20:if(e.prev=20,e.prev=21,!t||null==i.return){e.next=25;break}return e.next=25,i.return();case 25:if(e.prev=25,!n){e.next=28;break}throw r;case 28:return e.finish(25);case 29:return e.finish(20);case 30:re();case 31:case"end":return e.stop()}}),e,null,[[4,16,20,30],[21,,25,29]])})));return function(){return e.apply(this,arguments)}}(),de=function(e){var t=le(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);return e.map((function(e){var n=w()(e,"CategoryId"),r=w()(e,"FormTypeId");return Object(o.a)(Object(o.a)({},e),{},{CategoryName:w()(t,[n,"categoryName"]),FormTypeName:w()(t,[n,"formTypes",r])})}))}(q,w()(u,["listFormCategories"],[])),be=function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}(de,function(e,t){return"desc"===e?function(e,n){return J(e,n,t)}:function(e,n){return-J(e,n,t)}}(Q,V));return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce,{numSelected:$.length,onDelete:ie,onCreate:function(){var e=Object(T.f)(oe.c.FORM_ADD);ae.push(e)}}),Object(L.jsx)(m.a,{children:Object(L.jsxs)(f.a,{className:H.table,"aria-labelledby":"tableTitle",size:"small",children:[Object(L.jsx)(U,{numSelected:$.length,order:Q,orderBy:V,onSelectAllClick:function(e){ne(e.target.checked,q)},onRequestSort:X,rowCount:q.length}),Object(L.jsx)(p.a,{children:be.map((function(e,t){if("number"===typeof e)return null;var n=Object(T.f)(oe.c.FORM,{id:e.FormId}),r=ee(e.FormId),a="enhanced-table-checkbox-".concat(t);return Object(L.jsxs)(x.a,{hover:!0,onClick:function(){return te(e.FormId)},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:[Object(L.jsx)(g.a,{sx:{pl:3},padding:"checkbox",children:Object(L.jsx)(v.a,{color:"primary",checked:r,inputProps:{"aria-labelledby":a}})}),Object(L.jsx)(g.a,{align:"left",children:e.Title}),Object(L.jsxs)(g.a,{align:"left",children:[e.CategoryName||e.CategoryId," "]}),Object(L.jsx)(g.a,{align:"left",children:e.FormTypeName||e.FormTypeId}),Object(L.jsx)(g.a,{align:"left",children:Object(_.b)(e.CreatedAt)}),Object(L.jsx)(g.a,{align:"left",children:Object(_.b)(e.UpdatedAt)}),Object(L.jsx)(g.a,{align:"left",sx:{pr:3},children:Object(L.jsx)(I.c,{to:n,children:Object(L.jsx)(y.a,{color:"primary",children:Object(L.jsx)(A.a,{sx:{fontSize:"1.3rem"}})})})})]},e.FormId)}))})]})}),Object(L.jsx)(W.a,{onLoadMore:function(){a({variables:{limit:D.a.pagination.limit,nextToken:z}})},disabled:!z,loading:t})]})};t.default=function(){return Object(L.jsx)(r.a,{title:"Forms List",children:Object(L.jsx)(de,{})})}},762:function(e,t,n){"use strict";var r=n(722),a=n(708),c=n(1132),i=n(71),l=n(1061),o=n(590),s=n(2),d=Object(l.a)({root:{borderRadius:"50%",minWidth:"0",padding:"12px"}})(r.a),b=Object(o.a)((function(){return{toolbar:{padding:"24px 16px 2px"}}}));t.a=function(e){var t=e.onLoadMore,n=e.disabled,r=e.loading,l=b();return Object(s.jsx)(a.a,{container:!0,className:l.toolbar,justifyContent:"center",children:Object(s.jsx)(d,{type:"button",onClick:function(){return t()},disabled:n||r,children:r?Object(s.jsx)(c.a,{size:24}):Object(s.jsx)(i.a,{})})})}}}]);
//# sourceMappingURL=25.d1131bc9.chunk.js.map