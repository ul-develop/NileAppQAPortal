{"version":3,"sources":["views/application/property/components/Calendar/Scheduler/IntegratedDates.tsx","views/application/property/components/Calendar/Scheduler/TooltipContent.tsx","views/application/property/components/Calendar/Scheduler/Appointment.tsx","views/application/property/components/Calendar/Scheduler/TimeTableCell.tsx","views/application/property/components/Calendar/Scheduler/DayScaleCell.tsx","views/application/property/components/Calendar/Scheduler/BookingForm/constants.tsx","views/application/property/components/Calendar/Scheduler/BookingForm/helpers.ts","views/application/property/components/Calendar/Scheduler/BookingForm/AppointmentData.tsx","views/application/property/components/Calendar/Scheduler/BookingForm/RepeatSection.tsx","views/application/property/components/Calendar/Scheduler/BookingForm/BookingForm.tsx","views/application/property/components/Calendar/Scheduler/AppointmentForm/BasicLayout.tsx","views/application/property/components/Calendar/Scheduler/AppointmentForm/Layout.tsx","views/application/property/components/Calendar/Scheduler/AppointmentForm/CommandLayout.tsx","views/application/property/components/Calendar/Scheduler/AppointmentForm/AppointmentForm.tsx","views/application/property/components/Calendar/Scheduler/Scheduler.tsx"],"names":["IntegratedDates","dispatch","useDispatch","name","computed","startViewDate","setStartOfWeek","endViewDate","setEndOfWeek","useStyles","makeStyles","theme","wrapper","padding","spacing","paddingTop","section","marginBottom","TooltipContent","appointmentData","classes","formatTime","displayDate","displayTime","Paper","className","Typography","variant","color","_get","Event","AccessTime","appointment","backgroundColor","palette","primary","main","busy","Appointment","children","restProps","data","clsx","isBusyAppointment","disableCell","background","action","disabledBackground","backgroundSize","pointerEvents","TimeTableCell","props","timeConfig","useSelector","state","dateString","startDate","isCellActive","config","cell","today","alpha","DayScaleCell","TYPES","BOOKING_FORMAT","DATE_PICKER_FORMAT","defaultValues","REPEAT_TYPE","generateSellerValues","property","questions","date","moment","format","address","email","Auth","reduce","acc","code","type","appointmentType","undefined","generateInitialValues","FNAME","EMAIL","repeat","repeatType","endDate","prepareQuestionsAnswers","values","map","string","prepareSellerBookings","appointmentStartDate","busyAppointmentType","appointmentTypes","find","BUSY_APPOINTMENT_NAME","getBusyAppointmentType","busyTitle","title","startsAt","tentative","timeZone","tz","guess","cancelled","units","services","answers","startTime","mStartDate","diff","module","Array","from","Math","floor","_","i","day","mDay","add","getErrorMessages","bookings","bookingDates","booking","join","message","typography","h4","grey","textAlign","AppointmentData","Box","sx","mt","RepeatSection","useFormikContext","handleChange","setFieldValue","handleDateChange","field","FormControlLabel","control","Switch","checked","onChange","label","Collapse","in","RadioGroup","value","Radio","Grid","container","justifyContent","utils","MomentUtils","disableToolbar","inputVariant","margin","Date","BookingForm","onSave","profileId","isLoading","initialValues","onSubmit","a","setIsLoading","BookingsService","createBookings","errors","_isEmpty","setError","addAppointments","display","flexDirection","mb","Divider","my","Button","disableElevation","fullWidth","disabled","BasicLayout","layout","common","white","content","Layout","basicLayoutComponent","CommandLayout","commandLayoutComponent","RecurrenceLayout","recurrenceLayoutComponent","onCommitButtonClick","isSaving","setIsSaving","useEffect","AppointmentForm","useState","BasicLayoutComponent","connectProps","CommandLayoutComponent","layoutComponent","Scheduler","appointments","elevation","timeTableCellComponent","dayScaleCellComponent","cellDuration","DEFAULT_DURATION","onCommitChanges","appointmentComponent","showCloseButton","contentComponent"],"mappings":"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","file":"static/js/27.760dbddf.chunk.js","sourcesContent":["import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Plugin, Getter } from '@devexpress/dx-react-core';\nimport { setEndOfWeek, setStartOfWeek } from '../redux/actions';\n\nconst IntegratedDates = () => {\n\tconst dispatch = useDispatch();\n\n\treturn (\n\t\t<Plugin name='IntegratedDates'>\n\t\t\t<Getter\n\t\t\t\tname='startViewDate'\n\t\t\t\tcomputed={({ startViewDate }) => {\n\t\t\t\t\tdispatch(setStartOfWeek(startViewDate));\n\t\t\t\t\treturn startViewDate;\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Getter\n\t\t\t\tname='endViewDate'\n\t\t\t\tcomputed={({ endViewDate }) => {\n\t\t\t\t\tdispatch(setEndOfWeek(endViewDate));\n\t\t\t\t\treturn endViewDate;\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Plugin>\n\t);\n};\n\nexport default IntegratedDates;\n","import Paper from '@material-ui/core/Paper';\nimport _get from 'lodash.get';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n\tAccessTime as AccessTimeIcon,\n\tEvent as EventIcon,\n} from '@material-ui/icons';\nimport { AppointmentTooltip } from '@devexpress/dx-react-scheduler-material-ui';\nimport { formatTime } from '../helpers';\nimport type { TAppointment } from '../../../../../../types/YouCanBook/bookings';\n\nconst useStyles = makeStyles(theme => ({\n\twrapper: {\n\t\tpadding: theme.spacing(2),\n\t\tpaddingTop: 0,\n\t},\n\tsection: {\n\t\tmarginBottom: theme.spacing(1),\n\t},\n}));\n\nconst TooltipContent = ({\n\tappointmentData,\n}: AppointmentTooltip.ContentProps) => {\n\tconst classes = useStyles();\n\tconst { displayDate, displayTime } = formatTime(\n\t\tappointmentData as TAppointment\n\t);\n\n\treturn (\n\t\t<Paper className={classes.wrapper}>\n\t\t\t<Typography variant='h3' color='primary' className={classes.section}>\n\t\t\t\t{_get(appointmentData, 'title', '')}\n\t\t\t</Typography>\n\t\t\t<div className={classes.section}>\n\t\t\t\t<Typography variant='h5'>\n\t\t\t\t\t<EventIcon /> {displayDate}\n\t\t\t\t</Typography>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<Typography variant='h5'>\n\t\t\t\t\t<AccessTimeIcon /> {displayTime}\n\t\t\t\t</Typography>\n\t\t\t</div>\n\t\t</Paper>\n\t);\n};\nexport default TooltipContent;\n","import React from 'react';\nimport { Appointments } from '@devexpress/dx-react-scheduler-material-ui';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport { isBusyAppointment } from '../helpers';\nimport type { TAppointment } from '../../../../../../types/YouCanBook/bookings';\n\nconst useStyles = makeStyles(theme => ({\n\tappointment: {\n\t\tbackgroundColor: theme.palette.primary.main,\n\n\t\t'&:hover': {\n\t\t\tbackgroundColor: theme.palette.primary.main,\n\t\t},\n\t},\n\tbusy: {\n\t\tbackgroundColor: '#9e9e9e',\n\t\t'&:hover': {\n\t\t\tbackgroundColor: '#9e9e9e',\n\t\t},\n\t},\n}));\n\nconst Appointment = ({\n\tchildren,\n\t...restProps\n}: Appointments.AppointmentProps) => {\n\tconst { data } = restProps;\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Appointments.Appointment\n\t\t\t{...restProps}\n\t\t\tclassName={clsx(classes.appointment, {\n\t\t\t\t[classes.busy]: isBusyAppointment(data as TAppointment),\n\t\t\t})}\n\t\t>\n\t\t\t{children}\n\t\t</Appointments.Appointment>\n\t);\n};\n\nexport default Appointment;\n","import { WeekView } from '@devexpress/dx-react-scheduler-material-ui';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport _get from 'lodash.get';\nimport { isCellActive } from '../helpers';\n\nconst useStyles = makeStyles(theme => ({\n\tdisableCell: {\n\t\tbackground: `linear-gradient(-45deg,${theme.palette.action.disabledBackground} 10%,transparent 10%,transparent 50%,${theme.palette.action.disabledBackground} 50%,${theme.palette.action.disabledBackground} 60%,transparent 60%,transparent)`,\n\t\tbackgroundSize: '8px 8px',\n\t\tpointerEvents: 'none',\n\t},\n}));\n\nconst TimeTableCell = (props: WeekView.TimeTableCellProps) => {\n\tconst classes = useStyles();\n\tconst timeConfig = useSelector(state => _get(state, ['calendar', 'config']));\n\tconst { startDate: dateString } = props;\n\n\treturn (\n\t\t<WeekView.TimeTableCell\n\t\t\t{...props}\n\t\t\tclassName={clsx({\n\t\t\t\t[classes.disableCell]: !isCellActive({\n\t\t\t\t\tdateString,\n\t\t\t\t\tconfig: timeConfig,\n\t\t\t\t}),\n\t\t\t})}\n\t\t/>\n\t);\n};\n\nexport default TimeTableCell;\n","import * as React from 'react';\nimport { WeekView } from '@devexpress/dx-react-scheduler-material-ui';\nimport { makeStyles, alpha } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles(theme => ({\n\tcell: {\n\t\tpaddingTop: theme.spacing(1),\n\t},\n\ttoday: {\n\t\tbackgroundColor: alpha(theme.palette.primary.main, 0.16),\n\t},\n}));\n\nconst DayScaleCell = (props: WeekView.DayScaleCellProps) => {\n\tconst classes = useStyles();\n\tconst { today } = props;\n\n\treturn (\n\t\t<WeekView.DayScaleCell\n\t\t\t{...props}\n\t\t\tclassName={clsx(classes.cell, {\n\t\t\t\t[classes.today]: today,\n\t\t\t})}\n\t\t/>\n\t);\n};\n\nexport default DayScaleCell;\n","export const TYPES = {\n\tSIMPLE: 'SIMPLE',\n\tCHECKBOX: 'CHECKBOX',\n\tMULTI_DROPDOWN: 'MULTI_DROPDOWN',\n};\n","import { Auth } from 'aws-amplify';\nimport moment from 'moment';\nimport 'moment-timezone';\nimport _get from 'lodash.get';\nimport type { TQuestion, TAppointmentType } from '../types';\nimport { TYPES } from './constants';\nimport { BUSY_APPOINTMENT_NAME } from '../../constants';\n\nconst BOOKING_FORMAT = 'YYYY-MM-DDTHH:mm:ss';\nconst BOOKING_DATE_FORMAT = 'YYYY-MM-DD';\nconst BOOKING_TIME_FORMAT = 'HH:mm:ss';\nexport const DATE_PICKER_FORMAT = 'MM/DD/YYYY';\nconst WEEK_DAYS = 7;\n\nconst defaultValues = {\n\t[TYPES.SIMPLE]: '',\n\t[TYPES.CHECKBOX]: false,\n\t[TYPES.MULTI_DROPDOWN]: '',\n};\n\nconst REPEAT_TYPE = {\n\tdaily: 'daily',\n\tweekly: 'weekly',\n};\n\nexport const generateInitialValues = (questions: TQuestion[]): Object =>\n\tquestions.reduce(\n\t\t(acc, { code, type }) => ({ ...acc, [code]: defaultValues[type] }),\n\t\t{\n\t\t\tappointmentType: undefined,\n\t\t}\n\t);\n\nexport const generateSellerValues = ({\n\tproperty,\n\tappointmentData,\n\tconfig,\n}: any): Object => {\n\tconst { questions } = config;\n\tconst { startDate } = appointmentData;\n\tconst date = moment(startDate).format(DATE_PICKER_FORMAT);\n\tconst address = _get(property, 'PropertyData.FullAddress', '');\n\tconst email = _get(Auth, ['user', 'attributes', 'email'], '');\n\treturn {\n\t\t...generateInitialValues(questions),\n\t\tFNAME: address,\n\t\tEMAIL: email,\n\t\trepeat: false,\n\t\trepeatType: REPEAT_TYPE.daily,\n\t\tstartDate: date,\n\t\tendDate: date,\n\t};\n};\n\nconst prepareQuestionsAnswers = (questions: TQuestion[], values: any): Object =>\n\tquestions.map(({ code }) => ({ code, string: values[code] }));\n\nexport const prepareBookingData = ({\n\tappointmentData,\n\tvalues,\n\tconfig,\n}: any): Object => {\n\tconst { title, questions } = config;\n\tconst { FNAME: name, appointmentType } = values;\n\tconst { startDate } = appointmentData;\n\n\treturn {\n\t\ttitle: `${name} and ${title}`,\n\t\tstartsAt: moment(startDate).format(BOOKING_FORMAT),\n\t\ttentative: 'NOT_USED',\n\t\ttimeZone: moment.tz.guess(),\n\t\tcancelled: false,\n\t\tunits: 1,\n\t\tservices: [{ id: appointmentType.id, name: appointmentType.name }],\n\t\tanswers: prepareQuestionsAnswers(questions, values),\n\t};\n};\n\nexport const getBusyAppointmentType = (\n\tappointmentTypes: Object[]\n): Object | typeof undefined =>\n\tappointmentTypes.find(type => _get(type, 'name') === BUSY_APPOINTMENT_NAME);\n\nexport const prepareSellerBookings = ({\n\tappointmentData,\n\tvalues,\n\tconfig,\n}: any): Object[] => {\n\tconst { questions } = config;\n\tconst { startDate: appointmentStartDate } = appointmentData;\n\tconst { repeat, repeatType, startDate, endDate } = values;\n\tconst appointmentTypes = _get(config, 'services.items', []);\n\tconst busyAppointmentType = getBusyAppointmentType(appointmentTypes);\n\tconst busyTitle = 'busy';\n\n\tif (!repeat)\n\t\treturn [\n\t\t\t{\n\t\t\t\ttitle: busyTitle,\n\t\t\t\tstartsAt: moment(appointmentStartDate).format(BOOKING_FORMAT),\n\t\t\t\ttentative: 'NOT_USED',\n\t\t\t\ttimeZone: moment.tz.guess(),\n\t\t\t\tcancelled: false,\n\t\t\t\tunits: 1,\n\t\t\t\tservices: [busyAppointmentType],\n\t\t\t\tanswers: prepareQuestionsAnswers(questions, values),\n\t\t\t},\n\t\t];\n\n\tconst startTime = moment(appointmentStartDate).format(BOOKING_TIME_FORMAT);\n\tconst mStartDate = moment(startDate);\n\tconst mEndDate = moment(endDate);\n\tconst diff = mEndDate.diff(mStartDate, 'day');\n\tconst module = repeatType === REPEAT_TYPE.weekly ? WEEK_DAYS : 1;\n\n\tconst days = Array.from(\n\t\tArray(Math.floor(diff / module) + 1),\n\t\t(_, i) => i * module\n\t);\n\n\treturn days.map(day => {\n\t\tconst mDay = moment(startDate).add(day, 'day');\n\t\treturn {\n\t\t\ttitle: busyTitle,\n\t\t\tstartsAt: `${mDay.format(BOOKING_DATE_FORMAT)}T${startTime}`,\n\t\t\ttentative: 'NOT_USED',\n\t\t\ttimeZone: moment.tz.guess(),\n\t\t\tcancelled: false,\n\t\t\tunits: 1,\n\t\t\tservices: [busyAppointmentType],\n\t\t\tanswers: prepareQuestionsAnswers(questions, values),\n\t\t};\n\t});\n};\n\nexport const getErrorMessages = (bookings: Object[]): Object => {\n\tconst bookingDates = bookings\n\t\t.map(booking => _get(booking, 'startsAt'))\n\t\t.join(', ');\n\treturn { message: `Cannot book at dates: ${bookingDates}` };\n};\n\nexport const getAppointmentTypeDuration = ({\n\tnumberOfSlots,\n\tslotLengthMinutes,\n}: TAppointmentType): string => `${numberOfSlots * slotLengthMinutes} minutes`;\n","import { Box, makeStyles, Typography } from '@material-ui/core';\nimport { formatTime } from '../../helpers';\nimport type { TAppointment } from '../../../../../../../types/YouCanBook/bookings';\n\nconst useStyles = makeStyles(theme => ({\n\twrapper: {\n\t\t...theme.typography.h4,\n\t\tpadding: theme.spacing(2, 0),\n\t\tbackgroundColor: theme.palette.grey[100],\n\t\ttextAlign: 'center',\n\t},\n}));\n\ntype Props = {\n\tappointmentData: TAppointment;\n};\n\nexport const AppointmentData = ({ appointmentData }: Props) => {\n\tconst { startDate, endDate } = appointmentData;\n\tconst classes = useStyles();\n\tconst { displayDate, displayTime } = formatTime({ startDate, endDate });\n\treturn (\n\t\t<div className={classes.wrapper}>\n\t\t\t<Typography variant='h4'>{displayDate}</Typography>\n\t\t\t<Box sx={{ mt: 1 }}>\n\t\t\t\t<Typography variant='h3'>{displayTime}</Typography>\n\t\t\t</Box>\n\t\t</div>\n\t);\n};\n","import MomentUtils from '@date-io/moment';\nimport { useFormikContext } from 'formik';\nimport {\n\tCollapse,\n\tFormControlLabel,\n\tSwitch,\n\tGrid,\n\tRadioGroup,\n\tRadio,\n} from '@material-ui/core';\nimport {\n\tMuiPickersUtilsProvider,\n\tKeyboardDatePicker,\n} from '@material-ui/pickers';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\nimport moment from 'moment';\nimport _get from 'lodash.get';\nimport { DATE_PICKER_FORMAT } from './helpers';\n\nexport const RepeatSection = () => {\n\tconst { values, handleChange, setFieldValue } = useFormikContext();\n\n\tconst handleDateChange = (field: string) => (date: MaterialUiPickersDate) => {\n\t\tsetFieldValue(field, moment(date).format(DATE_PICKER_FORMAT));\n\t};\n\n\tconst repeat = _get(values, 'repeat');\n\tconst repeatType = _get(values, 'repeatType');\n\tconst startDate = _get(values, 'startDate');\n\tconst endDate = _get(values, 'endDate');\n\n\treturn (\n\t\t<div>\n\t\t\t<FormControlLabel\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tname='repeat'\n\t\t\t\t\t\tchecked={repeat}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel='Repeat'\n\t\t\t/>\n\n\t\t\t<Collapse in={repeat}>\n\t\t\t\t<div>\n\t\t\t\t\t<RadioGroup name='repeatType' value={repeatType} onChange={handleChange}>\n\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\tvalue='daily'\n\t\t\t\t\t\t\tcontrol={<Radio color='primary' />}\n\t\t\t\t\t\t\tlabel='Daily'\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\tvalue='weekly'\n\t\t\t\t\t\t\tcontrol={<Radio color='primary' />}\n\t\t\t\t\t\t\tlabel='Weekly'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RadioGroup>\n\t\t\t\t</div>\n\t\t\t\t<Grid container justifyContent='space-between'>\n\t\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\n\t\t\t\t\t\t<KeyboardDatePicker\n\t\t\t\t\t\t\tdisableToolbar\n\t\t\t\t\t\t\tinputVariant='outlined'\n\t\t\t\t\t\t\tformat={DATE_PICKER_FORMAT}\n\t\t\t\t\t\t\tmargin='normal'\n\t\t\t\t\t\t\tlabel='Start date'\n\t\t\t\t\t\t\tvalue={new Date(startDate)}\n\t\t\t\t\t\t\tonChange={handleDateChange('startDate')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<KeyboardDatePicker\n\t\t\t\t\t\t\tdisableToolbar\n\t\t\t\t\t\t\tinputVariant='outlined'\n\t\t\t\t\t\t\tformat={DATE_PICKER_FORMAT}\n\t\t\t\t\t\t\tmargin='normal'\n\t\t\t\t\t\t\tlabel='End date'\n\t\t\t\t\t\t\tvalue={new Date(endDate)}\n\t\t\t\t\t\t\tonChange={handleDateChange('endDate')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MuiPickersUtilsProvider>\n\t\t\t\t</Grid>\n\t\t\t</Collapse>\n\t\t</div>\n\t);\n};\n","import { Box, Button, Divider, Typography } from '@material-ui/core';\nimport { Formik, Form } from 'formik';\nimport { useSelector, useDispatch } from 'react-redux';\nimport _get from 'lodash.get';\nimport _isEmpty from 'lodash.isempty';\nimport {\n\tgenerateSellerValues,\n\tgetErrorMessages,\n\tprepareSellerBookings,\n} from './helpers';\nimport { AppointmentData } from './AppointmentData';\nimport { BookingsService } from '../../../../../../../services/YouCanBook';\nimport { setIsLoading, setError, addAppointments } from '../../redux/actions';\nimport { RepeatSection } from './RepeatSection';\nimport type { TAppointment } from '../../../../../../../types/YouCanBook/bookings';\n\ntype Props = {\n\tappointmentData: TAppointment;\n\tonSave: Function;\n};\n\nconst BookingForm = ({ appointmentData, onSave }: Props) => {\n\tconst dispatch = useDispatch();\n\tconst property = useSelector(state => _get(state, ['calendar', 'property']));\n\tconst profileId = _get(property, 'CalendarProfileId');\n\tconst config = useSelector(state => _get(state, ['calendar', 'config']));\n\tconst isLoading = useSelector(state => _get(state, ['calendar', 'isLoading']));\n\n\tconst initialValues = generateSellerValues({\n\t\tproperty,\n\t\tappointmentData,\n\t\tconfig,\n\t});\n\n\tconst onSubmit = async (values: Object) => {\n\t\tdispatch(setIsLoading(true));\n\t\ttry {\n\t\t\tconst data = prepareSellerBookings({ appointmentData, values, config });\n\t\t\tconst { bookings, errors } = await BookingsService.createBookings({\n\t\t\t\tprofileId,\n\t\t\t\tdata,\n\t\t\t});\n\t\t\tif (!_isEmpty(errors)) dispatch(setError(getErrorMessages(errors)));\n\t\t\tdispatch(addAppointments(bookings));\n\t\t\tonSave();\n\t\t} catch (error) {\n\t\t\tdispatch(setError(error as Error));\n\t\t}\n\t\tdispatch(setIsLoading(false));\n\t};\n\n\treturn (\n\t\t<Box sx={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t<Formik initialValues={initialValues} onSubmit={onSubmit}>\n\t\t\t\t<Form>\n\t\t\t\t\t<Box sx={{ mb: 2 }}>\n\t\t\t\t\t\t<Typography variant='h4'>Block available slots</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<AppointmentData appointmentData={appointmentData} />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<Box sx={{ my: 2 }}>\n\t\t\t\t\t\t<RepeatSection />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t>\n\t\t\t\t\t\tConfirm Booking\n\t\t\t\t\t</Button>\n\t\t\t\t</Form>\n\t\t\t</Formik>\n\t\t</Box>\n\t);\n};\n\nexport default BookingForm;\n","import { AppointmentForm } from '@devexpress/dx-react-scheduler-material-ui';\nimport { BookingForm } from '../BookingForm';\nimport type { TAppointment } from '../../../../../../../types/YouCanBook/bookings';\n\ntype Props = AppointmentForm.BasicLayoutProps & {\n\tonSave: Function;\n};\n\nexport const BasicLayout = (props: Props) => {\n\tconst { appointmentData, onSave } = props;\n\n\treturn (\n\t\t<BookingForm\n\t\t\tappointmentData={appointmentData as TAppointment}\n\t\t\tonSave={onSave}\n\t\t/>\n\t);\n};\n\nexport default BasicLayout;\n","// @ts-nocheck\nimport { makeStyles } from '@material-ui/core';\nimport { AppointmentForm } from '@devexpress/dx-react-scheduler-material-ui';\n\nconst useStyles = makeStyles(theme => ({\n\tlayout: {\n\t\tbackground: theme.palette.common.white,\n\t},\n\tcontent: {\n\t\tpadding: theme.spacing(4),\n\t},\n}));\n\nexport const Layout = (props: AppointmentForm.LayoutProps) => {\n\tconst {\n\t\tbasicLayoutComponent: BasicLayout,\n\t\tcommandLayoutComponent: CommandLayout,\n\t\trecurrenceLayoutComponent: RecurrenceLayout,\n\t\tchildren,\n\t\t...restProps\n\t} = props;\n\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<div className={classes.layout} {...restProps}>\n\t\t\t<CommandLayout />\n\t\t\t<div className={classes.content}>\n\t\t\t\t<BasicLayout />\n\t\t\t\t<RecurrenceLayout />\n\t\t\t</div>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import { useEffect } from 'react';\nimport { AppointmentForm } from '@devexpress/dx-react-scheduler-material-ui';\n\ntype Props = AppointmentForm.CommandLayoutProps & {\n\tisSaving: boolean;\n\tsetIsSaving: (value: boolean) => void;\n};\n\nexport const CommandLayout = (props: Props) => {\n\tconst { onCommitButtonClick, isSaving, setIsSaving } = props;\n\n\tuseEffect(() => {\n\t\tif (isSaving) {\n\t\t\tonCommitButtonClick();\n\t\t\tsetIsSaving(false);\n\t\t}\n\t}, [isSaving]);\n\n\treturn <div />;\n};\n","import React, { useState } from 'react';\n\nimport { AppointmentForm as SchedulerAppointmentForm } from '@devexpress/dx-react-scheduler-material-ui';\nimport { connectProps } from '@devexpress/dx-react-core';\nimport BasicLayout from './BasicLayout';\nimport { Layout } from './Layout';\nimport { CommandLayout } from './CommandLayout';\n\nexport const AppointmentForm = () => {\n\tconst [isSaving, setIsSaving] = useState(false);\n\tconst BasicLayoutComponent = connectProps(BasicLayout, () => ({\n\t\tonSave: () => setIsSaving(true),\n\t}));\n\n\tconst CommandLayoutComponent = connectProps(CommandLayout, () => ({\n\t\tisSaving,\n\t\tsetIsSaving,\n\t}));\n\n\treturn (\n\t\t<SchedulerAppointmentForm\n\t\t\tlayoutComponent={Layout}\n\t\t\tbasicLayoutComponent={BasicLayoutComponent}\n\t\t\tcommandLayoutComponent={CommandLayoutComponent}\n\t\t/>\n\t);\n};\n","import Paper from '@material-ui/core/Paper';\nimport { ViewState, EditingState } from '@devexpress/dx-react-scheduler';\nimport {\n\tScheduler as SchedulerComponent,\n\tWeekView,\n\tAppointments,\n\tAppointmentTooltip,\n\tToolbar,\n\tDateNavigator,\n\tTodayButton,\n} from '@devexpress/dx-react-scheduler-material-ui';\nimport _get from 'lodash.get';\nimport _isEmpty from 'lodash.isempty';\nimport { useSelector } from 'react-redux';\n\nimport { DEFAULT_DURATION } from '../constants';\nimport IntegratedDates from './IntegratedDates';\nimport TooltipContent from './TooltipContent';\nimport Appointment from './Appointment';\nimport TimeTableCell from './TimeTableCell';\nimport DayScaleCell from './DayScaleCell';\nimport { AppointmentForm } from './AppointmentForm';\n\ntype Props = {\n\tprofileId: string;\n};\n\nconst Scheduler = ({ profileId }: Props) => {\n\tif (!profileId) return null;\n\n\tconst config = useSelector(state => _get(state, ['calendar', 'config']));\n\tconst appointments = useSelector(state =>\n\t\t_get(state, ['calendar', 'appointments'])\n\t);\n\n\tconst onCommitChanges = () => {};\n\n\tif (_isEmpty(config)) return <></>;\n\n\treturn (\n\t\t<Paper elevation={3}>\n\t\t\t<SchedulerComponent data={appointments}>\n\t\t\t\t<ViewState />\n\t\t\t\t<WeekView\n\t\t\t\t\ttimeTableCellComponent={TimeTableCell}\n\t\t\t\t\tdayScaleCellComponent={DayScaleCell}\n\t\t\t\t\tcellDuration={_get(config, 'slotLengthMinutes') || DEFAULT_DURATION}\n\t\t\t\t/>\n\t\t\t\t<EditingState onCommitChanges={onCommitChanges} />\n\t\t\t\t<IntegratedDates />\n\t\t\t\t<Toolbar />\n\t\t\t\t<DateNavigator />\n\t\t\t\t<TodayButton />\n\t\t\t\t<Appointments appointmentComponent={Appointment} />\n\t\t\t\t<AppointmentTooltip showCloseButton contentComponent={TooltipContent} />\n\t\t\t\t<AppointmentForm />\n\t\t\t</SchedulerComponent>\n\t\t</Paper>\n\t);\n};\n\nexport default Scheduler;\n"],"sourceRoot":""}