(this["webpackJsonpnile-portal"]=this["webpackJsonpnile-portal"]||[]).push([[17],{682:function(e,t,r){"use strict";var a=r(23),n=r(0),i=r.n(n),c=r(916),o=r(657),s=r(1),l=i.a.forwardRef((function(e,t){var r,n,i=e.children,l=e.type,d=e.direction,j=e.offset,u=e.scale;switch(d){case"up":case"left":r=j,n=0;break;case"right":case"down":default:r=0,n=j}var b=Object(c.a)(r,n),p=Object(a.a)(b,2),f=p[0],O=p[1],x=Object(c.a)(r,n),m=Object(a.a)(x,2),v=m[0],g=m[1];switch(l){case"rotate":return Object(s.jsx)(o.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:i});case"slide":return"up"===d||"down"===d?Object(s.jsx)(o.a.div,{ref:t,animate:{y:void 0!==v?v:""},onHoverEnd:function(){return g()},onHoverStart:function(){return g()},children:i}):Object(s.jsx)(o.a.div,{ref:t,animate:{x:void 0!==f?f:""},onHoverEnd:function(){return O()},onHoverStart:function(){return O()},children:i});case"scale":default:return Object(s.jsx)(o.a.div,{ref:t,whileHover:{scale:null===u||void 0===u?void 0:u.hover},whileTap:{scale:null===u||void 0===u?void 0:u.tap},children:i})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=l},697:function(e,t,r){"use strict";var a=r(15),n=r(151),i=r(57),c=r(566),o=r(386),s=r(565),l=r(568),d=r(567),j=r(1),u=["children","content","contentClass","darkTitle","secondary","sx","title"],b=function(e){var t=e.children,r=e.content,b=e.contentClass,p=e.darkTitle,f=e.secondary,O=e.sx,x=void 0===O?{}:O,m=e.title,v=Object(n.a)(e,u),g=Object(i.a)();return Object(j.jsxs)(c.a,Object(a.a)(Object(a.a)({sx:Object(a.a)({border:"1px solid",borderColor:"dark"===g.palette.mode?g.palette.dark.light+15:g.palette.primary.light,":hover":{boxShadow:"dark"===g.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},x)},v),{},{children:[!p&&m&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h5",children:m}),action:f}),p&&m&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h4",children:m}),action:f}),m&&Object(j.jsx)(l.a,{sx:{opacity:1,borderColor:"dark"===g.palette.mode?g.palette.dark.light+15:g.palette.primary.light}}),r&&Object(j.jsx)(d.a,{sx:{p:2.5},className:b||"",children:t}),!r&&t]}))};b.defaultProps={content:!0},t.a=b},707:function(e,t,r){"use strict";var a=r(97),n=r.n(a),i=r(949),c=r(950),o=r(1);t.a=function(e){var t=e.data,r=e.source,a=void 0===r?"":r,s=e.label,l=e.getValue,d=e.defaultValue;return Object(o.jsxs)(i.a,{children:[Object(o.jsx)(c.a,{variant:"head",children:s}),Object(o.jsx)(c.a,{children:l?l(t):n()(t,a)||d||""})]})}},716:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return j}));var a=r(97),n=r.n(a),i=r(127),c=r.n(i),o=r(47),s=r(717),l=o.a.offerSteps,d=function(e){var t;return(t=+n()(e,["Step","id"])===l.counteredBySeller?n()(e,["CounterOffer","SellerCounter","OfferPrice"]):n()(e,["CounterOffer","BuyerCounter","OfferPrice"]))?Object(s.a)(t):""},j=function(e,t){return!c()(n()(e,t))}},717:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(47),n=function(e){return"".concat(e?new Intl.NumberFormat(a.a.locate.country,{style:"currency",currency:a.a.locate.currency}).format(e):"")}},747:function(e,t,r){"use strict";var a=r(15),n=r(16),i=r(29),c=r(680),o=r(911),s=r(667),l=r(569),d=r(739),j=r.n(d),u=r(564),b=r(19),p=r(746),f=r(97),O=r.n(f),x=r(127),m=r.n(x),v=r(0),g=r(914),h=r(749),y=r(565),w=r(259),S=r.n(w),C=r(1),I=Object(u.a)((function(){return{uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),R=function(e){var t=e.file,r=e.onRemove,a=I();return t.preview?Object(C.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(C.jsxs)("div",{className:a.uploadImage,children:[Object(C.jsx)(g.a,{component:"img",src:t.preview,title:"file"}),Object(C.jsx)("div",{className:a.imageHover,children:Object(C.jsx)(h.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return r()},children:Object(C.jsx)(S.a,{})})})]})}):Object(C.jsx)(s.a,{item:!0,xs:12,alignContent:"center",alignItems:"center",children:Object(C.jsxs)("div",{className:a.name,children:[Object(C.jsx)(y.a,{children:t.name}),Object(C.jsx)("div",{className:a.imageHover,children:Object(C.jsx)(h.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return r()},children:Object(C.jsx)(S.a,{})})})]})})},k=r(915),A=r(557),P=r(908),N=r(909),F=Object(A.a)((function(e){return{uploadFile:{position:"relative",overflow:"hidden",display:"flex",alignItems:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1,cursor:"pointer"}},imageHover:{opacity:0},removeButton:{margin:"auto"},removeIcon:{color:e.palette.primary.main},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),H=function(e){var t=e.preview,r=e.name,n=m()(t)?"":{component:k.a,href:t,target:"_blank"};return Object(C.jsx)(y.a,Object(a.a)(Object(a.a)({variant:"body2",color:"primary",display:"block"},n),{},{children:r}))},D=function(e){var t=e.file,r=e.onRemove,a=F();return Object(C.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(C.jsxs)("div",{className:a.uploadFile,children:[Object(C.jsx)(P.a,{}),H(t),Object(C.jsx)("div",{className:a.imageHover,children:Object(C.jsx)(N.a,{onClick:function(){return r()},className:a.removeIcon})})]})})},B=r(150),z="application/pdf",T=Object(u.a)((function(){return{fileInput:{background:"#fcfcfe",width:"100%",borderWidth:2,borderRadius:2,borderColor:"#eee",borderStyle:"dashed"},activeStyle:{borderColor:"#2196f3"},fileContainer:{padding:"30px 0",textAlign:"center",borderRadius:"4px",cursor:"pointer","& > svg":{verticalAlign:"sub",marginRight:"5px"}},uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},previewWrapper:{marginTop:"12px"}}}));t.a=function(e){var t=e.files,r=e.accept,d=void 0===r?"image/*":r,u=e.maxFiles,f=void 0===u?10:u,x=e.onDrop,g=e.disabled,h=e.name,y=e.loading,w=void 0!==y&&y,S=T(),I=Object(p.a)({onDrop:x,accept:d,maxFiles:f}),k=I.getRootProps,A=I.getInputProps,P=I.isDragActive,N=I.fileRejections,F=Object(B.d)();Object(v.useEffect)((function(){if(!m()(N)){var e=O()(N,"0.errors.0.message","");F({message:e,variant:"alert",alertSeverity:"error"})}}),[N]);var H=function(e){return function(){var r=Object(i.a)(t);r.splice(e,1),x(r)}};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(c.a,Object(a.a)(Object(a.a)({},k({className:Object(b.a)(S.fileInput,Object(n.a)({},S.activeStyle,P))})),{},{disabled:g,children:Object(C.jsxs)(o.a,{className:S.fileContainer,children:[Object(C.jsx)(j.a,{}),"Drop file here to upload"]})})),Object(C.jsx)("input",Object(a.a)(Object(a.a)({},A()),{},{name:h})),w?Object(C.jsx)(s.a,{item:!0,xs:12,children:Object(C.jsx)(l.a,{})}):Object(C.jsx)(s.a,{container:!0,spacing:1,className:S.previewWrapper,children:t.map((function(e,t){var r=e.type===z?D:R;return Object(C.jsx)(r,{file:e,onRemove:H(t)},e.name)}))})]})}},942:function(e,t,r){"use strict";r.r(t);var a=r(55),n=r(57),i=r(663),c=r(567),o=r(667),s=r(952),l=r(953),d=r(954),j=r(568),u=r(750),b=r(696),p=r(680),f=r(951),O=r(97),x=r.n(O),m=r(127),v=r.n(m),g=r(797),h=r(156),y=r(0),w=r(276),S=r(682),C=r(697),I=r(105),R=r(280),k=r(192),A=r(716),P=r(707),N=r(747),F=r(23),H=r(29),D=r(718),B=r(47),z=r(281),T=r(150),_=r(15),E=r(1),U={150:{variant:"outlined",color:"secondary"},200:{variant:"contained",color:"primary"},500:{variant:"contained",color:"primary"},800:{variant:"contained",color:"primary"},910:{variant:"text",color:"error"}},$=function(e){var t=e.action,r=e.onClick,a=e.disabled,n=t.action,i=t.next_step_id,c=U[i];return Object(E.jsx)(o.a,{item:!0,children:Object(E.jsx)(p.a,Object(_.a)(Object(_.a)({type:"button",onClick:r,disabled:a},c),{},{children:n}))})},q=B.a.offerSteps,L=[q.awaitingAdvisorApproval,q.paBeingCreated,q.reviewScarRequest],V=function(e){var t=e.offer,r=Object(g.a)(Object(h.d)(R.listOfferSteps),{fetchPolicy:"cache-first"}),a=r.loading,n=r.data,i=x()(n,"listOfferSteps",[]),c=+x()(t,"StepId",0);if(!L.includes(c))return Object(E.jsx)(E.Fragment,{});var s=function(e){return c===e},l=s(q.paBeingCreated)&&!Object(A.b)(t,"SignedPurchaseAgreement"),d=s(q.reviewScarRequest)&&!Object(A.b)(t,"SCAR");if(l||d)return Object(E.jsx)(E.Fragment,{});var j=x()(t,"OfferId"),u=i.find((function(e){return e.id===c})),b=Object(y.useMemo)((function(){var e=x()(u,"allowed_actions",[]);return e.length?Object(H.a)(e).reverse():e}),[u]),p=Object(T.d)(),f=Object(D.a)(Object(h.d)(z.updateOfferStep),{onCompleted:function(e){v()(e)||v()(e.updateOfferStep)||window.location.reload()},onError:function(e){p({message:x()(e,"message","Something went wrong"),variant:"alert",alertSeverity:"error"})}}),O=Object(F.a)(f,2),m=O[0],w=O[1].loading;return Object(E.jsxs)(E.Fragment,{children:[(w||a)&&Object(E.jsx)(k.a,{}),Object(E.jsx)(o.a,{container:!0,spacing:1,children:b.map((function(e){return Object(E.jsx)($,{action:e,onClick:(t=e.next_step_id,function(){return m({variables:{OfferId:j,NewStepId:t}})}),disabled:w},"".concat(j,"-").concat(e.next_step_id));var t}))})]})},W="application/pdf",J=r(289),M="SignedPurchaseAgreement",G="SCAR",K=function(e){var t=e.id,r=Object(g.a)(Object(h.d)(R.getOffer),{variables:{OfferId:t}}),a=r.loading,O=r.error,m=r.data,F=r.refetch,H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return{name:"getOfferDocPutUrls",query:R.getOfferDocPutUrls,generateVariables:function(r){return{Documents:r,OfferId:t,DocumentType:e}},refetch:F}},D=Object(T.e)(H(M)),z=D.files,_=D.onFilesChange,U=D.uploadFiles,$=D.isUploadLoading,q=Object(T.e)(H()),L=q.files,K=q.onFilesChange,Q=q.uploadFiles,X=q.isUploadLoading,Y=x()(m,"getOffer",{}),Z=+x()(Y,"StepId",0),ee=x()(Y,"OfferNo",""),te=Object(n.a)();if(Object(y.useEffect)((function(){var e=x()(m,"getOffer",{}),t=x()(e,"SignedPurchaseAgreement")||[],r=x()(e,"SCAR")||[];v()(t)||_(t.map(J.b)),v()(r)||K(r.map(J.b))}),[m]),a)return Object(E.jsx)(k.a,{});if(O&&v()(Y))return Object(E.jsx)(i.a,{severity:"error",sx:{color:te.palette.error.main},children:"Offer not found"});var re=Z===B.a.offerSteps.paBeingCreated,ae=Z===B.a.offerSteps.reviewScarRequest,ne=$||X;return Object(E.jsxs)(w.a,{title:ee,content:!1,secondary:Object(E.jsx)(V,{offer:Y}),children:[Object(E.jsx)(c.a,{children:Object(E.jsxs)(o.a,{container:!0,spacing:I.b,children:[Object(E.jsx)(o.a,{item:!0,lg:6,xs:12,children:Object(E.jsx)(C.a,{title:"Offer Information",children:Object(E.jsx)(s.a,{children:Object(E.jsx)(l.a,{sx:{"& td":{borderBottom:"none"}},size:"small",children:Object(E.jsxs)(d.a,{children:[Object(E.jsx)(P.a,{data:Y,source:"OfferNo",label:"Offer No"}),Object(E.jsx)(P.a,{data:Y,source:"PropertyData.FullAddress",label:"Property Address"}),Object(E.jsx)(P.a,{data:Y,source:"PropertyData.OwnerNames",label:"Sellers"}),Object(E.jsx)(P.a,{data:Y,getValue:A.a,label:"Offer Price"}),Object(E.jsx)(P.a,{data:Y,source:"Funding.PurchaseType",label:"Funding"}),Object(E.jsx)(P.a,{data:Y,source:"Funding.LoanType",label:"Loan Type"}),Object(E.jsx)(P.a,{data:Y,source:"Funding.DownPayment",label:"Down Payment"}),Object(E.jsx)(P.a,{data:Y,source:"Step.name",label:"Status"})]})})})})}),Object(E.jsx)(o.a,{item:!0,lg:6,xs:12,children:Object(E.jsxs)(o.a,{container:!0,direction:"column",spacing:I.b,children:[Object(E.jsx)(o.a,{item:!0,xs:12,children:Object(E.jsx)(C.a,{title:"Signed Purchase Agreement",children:Object(E.jsx)(N.a,{name:"PA",files:z,onDrop:_,accept:W,disabled:!re})})}),Object(E.jsx)(o.a,{item:!0,xs:12,children:Object(E.jsx)(C.a,{title:"SCAR",children:Object(E.jsx)(N.a,{name:"SCAR",files:L,onDrop:K,accept:W,disabled:!ae})})})]})})]})}),Object(E.jsx)(j.a,{}),Object(E.jsx)(u.a,{children:Object(E.jsx)(o.a,{item:!0,xs:12,children:Object(E.jsx)(b.a,{direction:"row",justifyContent:"flex-end",children:Object(E.jsx)(S.a,{children:Object(E.jsx)(p.a,{color:"primary",variant:"contained",type:"submit",disabled:!re&&!ae||ne,onClick:function(){U(),Q()},children:ne?Object(E.jsx)(f.a,{size:"1.5rem",color:"secondary"}):"Update"})})})})})]})};t.default=function(){var e=Object(a.j)().id;return Object(E.jsx)(K,{id:e})}}}]);
//# sourceMappingURL=17.34584bb3.chunk.js.map