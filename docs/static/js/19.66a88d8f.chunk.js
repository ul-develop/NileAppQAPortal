(this["webpackJsonpnile-portal"]=this["webpackJsonpnile-portal"]||[]).push([[19],{708:function(e,t,n){"use strict";var a=n(22),r=n(0),i=n.n(r),c=n(821),o=n(682),s=n(1),l=i.a.forwardRef((function(e,t){var n,r,i=e.children,l=e.type,d=e.direction,j=e.offset,b=e.scale;switch(d){case"up":case"left":n=j,r=0;break;case"right":case"down":default:n=0,r=j}var u=Object(c.a)(n,r),p=Object(a.a)(u,2),f=p[0],O=p[1],x=Object(c.a)(n,r),m=Object(a.a)(x,2),g=m[0],v=m[1];switch(l){case"rotate":return Object(s.jsx)(o.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:i});case"slide":return"up"===d||"down"===d?Object(s.jsx)(o.a.div,{ref:t,animate:{y:void 0!==g?g:""},onHoverEnd:function(){return v()},onHoverStart:function(){return v()},children:i}):Object(s.jsx)(o.a.div,{ref:t,animate:{x:void 0!==f?f:""},onHoverEnd:function(){return O()},onHoverStart:function(){return O()},children:i});case"scale":default:return Object(s.jsx)(o.a.div,{ref:t,whileHover:{scale:null===b||void 0===b?void 0:b.hover},whileTap:{scale:null===b||void 0===b?void 0:b.tap},children:i})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=l},717:function(e,t,n){"use strict";var a=n(12),r=n(135),i=n(63),c=n(588),o=n(406),s=n(587),l=n(590),d=n(589),j=n(1),b=["children","content","contentClass","darkTitle","secondary","sx","title"],u=function(e){var t=e.children,n=e.content,u=e.contentClass,p=e.darkTitle,f=e.secondary,O=e.sx,x=void 0===O?{}:O,m=e.title,g=Object(r.a)(e,b),v=Object(i.a)();return Object(j.jsxs)(c.a,Object(a.a)(Object(a.a)({sx:Object(a.a)({border:"1px solid",borderColor:"dark"===v.palette.mode?v.palette.dark.light+15:v.palette.primary.light,":hover":{boxShadow:"dark"===v.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},x)},g),{},{children:[!p&&m&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h5",children:m}),action:f}),p&&m&&Object(j.jsx)(o.a,{sx:{p:2.5},title:Object(j.jsx)(s.a,{variant:"h4",children:m}),action:f}),m&&Object(j.jsx)(l.a,{sx:{opacity:1,borderColor:"dark"===v.palette.mode?v.palette.dark.light+15:v.palette.primary.light}}),n&&Object(j.jsx)(d.a,{sx:{p:2.5},className:u||"",children:t}),!n&&t]}))};u.defaultProps={content:!0},t.a=u},735:function(e,t,n){"use strict";var a=n(45),r=n.n(a),i=n(1007),c=n(1008),o=n(1);t.a=function(e){var t=e.data,n=e.source,a=void 0===n?"":n,s=e.label,l=e.getValue,d=e.defaultValue;return Object(o.jsxs)(i.a,{children:[Object(o.jsx)(c.a,{variant:"head",children:s}),Object(o.jsx)(c.a,{children:l?l(t):r()(t,a)||d||""})]})}},778:function(e,t,n){"use strict";var a=n(12),r=n(16),i=n(29),c=n(706),o=n(964),s=n(693),l=n(591),d=n(768),j=n.n(d),b=n(586),u=n(19),p=n(777),f=n(45),O=n.n(f),x=n(120),m=n.n(x),g=n(0),v=n(820),h=n(781),y=n(587),C=n(278),S=n.n(C),w=n(1),R=Object(b.a)((function(){return{uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),I=function(e){var t=e.file,n=e.onRemove,a=R();return t.preview?Object(w.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(w.jsxs)("div",{className:a.uploadImage,children:[Object(w.jsx)(v.a,{component:"img",src:t.preview,title:"file"}),Object(w.jsx)("div",{className:a.imageHover,children:Object(w.jsx)(h.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return n()},children:Object(w.jsx)(S.a,{})})})]})}):Object(w.jsx)(s.a,{item:!0,xs:12,alignContent:"center",alignItems:"center",children:Object(w.jsxs)("div",{className:a.name,children:[Object(w.jsx)(y.a,{children:t.name}),Object(w.jsx)("div",{className:a.imageHover,children:Object(w.jsx)(h.a,{color:"secondary",size:"small",className:a.removeButton,onClick:function(){return n()},children:Object(w.jsx)(S.a,{})})})]})})},F=n(966),k=n(578),A=n(948),D=n(949),P=Object(k.a)((function(e){return{uploadFile:{position:"relative",overflow:"hidden",display:"flex",alignItems:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1,cursor:"pointer"}},imageHover:{opacity:0},removeButton:{margin:"auto"},removeIcon:{color:e.palette.primary.main},name:{padding:"12px 0",marginBottom:"12px",position:"relative","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}}}})),H=function(e){var t=e.preview,n=e.name,r=m()(t)?"":{component:F.a,href:t,target:"_blank"};return Object(w.jsx)(y.a,Object(a.a)(Object(a.a)({variant:"body2",color:"primary",display:"block"},r),{},{children:n}))},N=function(e){var t=e.file,n=e.onRemove,a=P();return Object(w.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,alignContent:"center",alignItems:"center",children:Object(w.jsxs)("div",{className:a.uploadFile,children:[Object(w.jsx)(A.a,{}),H(t),Object(w.jsx)("div",{className:a.imageHover,children:Object(w.jsx)(D.a,{onClick:function(){return n()},className:a.removeIcon})})]})})},_=n(89),z="application/pdf",B=Object(b.a)((function(){return{fileInput:{background:"#fcfcfe",width:"100%",borderWidth:2,borderRadius:2,borderColor:"#eee",borderStyle:"dashed"},activeStyle:{borderColor:"#2196f3"},fileContainer:{padding:"30px 0",textAlign:"center",borderRadius:"4px",cursor:"pointer","& > svg":{verticalAlign:"sub",marginRight:"5px"}},uploadImage:{position:"relative",overflow:"hidden",borderRadius:"4px",cursor:"pointer",width:"100%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center","& > svg":{verticalAlign:"sub",marginRight:"5px"},"&:hover $imageHover":{opacity:1,zIndex:1}},imageHover:{position:"absolute",opacity:0,zIndex:-1,left:"0",top:"0",background:"rgba(255, 255, 255, .8)",width:"100%",height:"100%",display:"inline-flex",transition:"all 0.3s ease"},removeButton:{margin:"auto"},previewWrapper:{marginTop:"12px"}}}));t.a=function(e){var t=e.files,n=e.accept,d=void 0===n?"image/*":n,b=e.maxFiles,f=void 0===b?10:b,x=e.onDrop,v=e.disabled,h=e.name,y=e.loading,C=void 0!==y&&y,S=B(),R=Object(p.a)({onDrop:x,accept:d,maxFiles:f}),F=R.getRootProps,k=R.getInputProps,A=R.isDragActive,D=R.fileRejections,P=Object(_.e)();Object(g.useEffect)((function(){if(!m()(D)){var e=O()(D,"0.errors.0.message","");P({message:e,variant:"alert",alertSeverity:"error"})}}),[D]);var H=function(e){return function(){var n=Object(i.a)(t);n.splice(e,1),x(n)}};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(c.a,Object(a.a)(Object(a.a)({},F({className:Object(u.a)(S.fileInput,Object(r.a)({},S.activeStyle,A))})),{},{disabled:v,children:Object(w.jsxs)(o.a,{className:S.fileContainer,children:[Object(w.jsx)(j.a,{}),"Drop file here to upload"]})})),Object(w.jsx)("input",Object(a.a)(Object(a.a)({},k()),{},{name:h})),C?Object(w.jsx)(s.a,{item:!0,xs:12,children:Object(w.jsx)(l.a,{})}):Object(w.jsx)(s.a,{container:!0,spacing:1,className:S.previewWrapper,children:t.map((function(e,t){var n=e.type===z?N:I;return Object(w.jsx)(n,{file:e,onRemove:H(t)},e.name)}))})]})}},995:function(e,t,n){"use strict";n.r(t);var a=n(61),r=n(63),i=n(689),c=n(589),o=n(693),s=n(1010),l=n(1011),d=n(1012),j=n(590),b=n(782),u=n(729),p=n(706),f=n(1009),O=n(45),x=n.n(O),m=n(120),g=n.n(m),v=n(837),h=n(157),y=n(0),C=n(295),S=n(708),w=n(717),R=n(111),I=n(207),F=n(162),k=n(33),A=n(735),D=n(778),P=n(22),H=n(29),N=n(747),_=n(307),z=n(40),B=n(300),T=n(299),L=n(89),E=n(12),U=n(1),V={150:{variant:"outlined",color:"secondary"},200:{variant:"contained",color:"primary"},500:{variant:"contained",color:"primary"},800:{variant:"contained",color:"primary"},910:{variant:"text",color:"error"}},$=function(e){var t=e.action,n=e.onClick,a=e.disabled,r=t.action,i=t.next_step_id,c=V[i];return Object(U.jsx)(o.a,{item:!0,children:Object(U.jsx)(p.a,Object(E.a)(Object(E.a)({type:"button",onClick:n,disabled:a},c),{},{children:r}))})},q=z.a.offerSteps,W=[q.awaitingAdvisorApproval,q.paBeingCreated,q.reviewScarRequest],J=function(e){var t=e.offer,n=Object(v.a)(Object(h.d)(T.listOfferSteps),{fetchPolicy:"cache-first"}),a=n.loading,r=n.data,i=x()(r,"listOfferSteps",[]),c=+x()(t,"StepId",0);if(!W.includes(c))return Object(U.jsx)(U.Fragment,{});var s=function(e){return c===e},l=s(q.paBeingCreated)&&!Object(_.b)(t,"SignedPurchaseAgreement"),d=s(q.reviewScarRequest)&&!Object(_.b)(t,"SCAR");if(l||d)return Object(U.jsx)(U.Fragment,{});var j=x()(t,"OfferId"),b=i.find((function(e){return e.id===c})),u=Object(y.useMemo)((function(){var e=x()(b,"allowed_actions",[]);return e.length?Object(H.a)(e).reverse():e}),[b]),p=Object(L.e)(),f=Object(N.a)(Object(h.d)(B.updateOfferStep),{onCompleted:function(e){g()(e)||g()(e.updateOfferStep)||window.location.reload()},onError:function(e){p({message:x()(e,"message","Something went wrong"),variant:"alert",alertSeverity:"error"})}}),O=Object(P.a)(f,2),m=O[0],C=O[1].loading;return Object(U.jsxs)(U.Fragment,{children:[(C||a)&&Object(U.jsx)(F.a,{}),Object(U.jsx)(o.a,{container:!0,spacing:1,children:u.map((function(e){return Object(U.jsx)($,{action:e,onClick:(t=e.next_step_id,function(){return m({variables:{OfferId:j,NewStepId:t}})}),disabled:C},"".concat(j,"-").concat(e.next_step_id));var t}))})]})},M="application/pdf",Q=n(578),Y=Object(Q.a)((function(e){return{downloadLink:{marginRight:e.spacing(2)}}})),G=function(e){var t=e.submissionFiles,n=Y(),a=function(e,t,a){var r=e.find((function(e){return x()(e,["QuestionName"],"")===t})),i=x()(r,["Files","0","presignedUrl"]);return g()(i)?Object(U.jsx)(U.Fragment,{}):Object(U.jsx)(p.a,{variant:"outlined",color:"secondary",className:n.downloadLink,type:"button",onClick:function(){return Object(k.f)(i)},children:a})};return g()(t)?Object(U.jsx)(U.Fragment,{}):Object(U.jsxs)(U.Fragment,{children:[a(t,"fd_upload_buyer_preapproval_letter","Pre-Approval Letter"),a(t,"fd_upload_buyer_proof_of_funds","Proof of Funds"),a(t,"fundingtype_fund_proof","Proof of Funds")]})},K=Object(Q.a)((function(e){return{downloadLink:{marginRight:e.spacing(2)}}})),X=function(e){var t=e.file,n=K(),a=x()(t,["label"]),r=x()(t,["url"]);return g()(r)||g()(a)?Object(U.jsx)(U.Fragment,{}):Object(U.jsx)(p.a,{variant:"outlined",color:"secondary",className:n.downloadLink,type:"button",onClick:function(){return Object(k.f)(r)},children:a})},Z=n(587),ee=n(1006),te=n(1007),ne=n(1008),ae=n(303),re="Done",ie="In Process",ce="OVERDUE",oe=function(e,t){var n,a,r=x()(e,["Contingencies","".concat(t,"DueDate")]);return r&&(n=Object(ae.b)(r),a=Object(ae.b)((new Date).toDateString())<=n?ie:ce),"Yes"===x()(e,["Contingencies","".concat(t,"Removed")])&&(a=re),{status:a,dueDate:n}},se=function(e){var t=e.offer,n=function(e){return[Object(E.a)({name:"FinanceContingency",title:"Finance Contingency Removal"},oe(e,"FinanceContingency")),Object(E.a)({name:"InspectionContingency",title:"Inspection Contingency Removal"},oe(e,"InspectionContingency")),Object(E.a)({name:"SaleOfHomeContingency",title:"Homesale Contingency Removal"},oe(e,"SaleOfHomeContingency"))]}(t),a=x()(n,"AllRemoved",!1),r=x()(t,["PropertyData","FullAddress"]),i=x()(t,"StepId",0)<500;return g()(n)||a||i?Object(U.jsx)(U.Fragment,{}):Object(U.jsxs)(w.a,{title:"Contingencies Status",children:[Object(U.jsx)(Z.a,{variant:"subtitle2",children:r}),Object(U.jsx)(s.a,{children:Object(U.jsxs)(l.a,{sx:{"& td":{borderBottom:"none"}},size:"small",children:[Object(U.jsx)(ee.a,{children:Object(U.jsxs)(te.a,{children:[Object(U.jsx)(ne.a,{children:"Type"}),Object(U.jsx)(ne.a,{children:"Due Date"}),Object(U.jsx)(ne.a,{children:"Status"})]})}),Object(U.jsx)(d.a,{children:n.map((function(e){return Object(U.jsxs)(te.a,{children:[Object(U.jsx)(ne.a,{variant:"head",children:e.title}),Object(U.jsx)(ne.a,{variant:"head",children:e.dueDate||"n/a"}),Object(U.jsx)(ne.a,{variant:"head",children:e.status||"n/a"})]},e.title)}))})]})})]})},le="SignedPurchaseAgreement",de="SCAR",je=function(e){var t=e.id,n=Object(v.a)(Object(h.d)(I.a.getOffer),{variables:{OfferId:t}}),a=n.loading,O=n.error,m=n.data,P=n.refetch,H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return{name:"getOfferDocPutUrls",query:I.a.getOfferDocPutUrls,generateVariables:function(n){return{Documents:n,OfferId:t,DocumentType:e}},refetch:P}},N=Object(L.f)(H(le)),_=N.files,B=N.onFilesChange,T=N.uploadFiles,E=N.isUploadLoading,V=Object(L.f)(H()),$=V.files,q=V.onFilesChange,W=V.uploadFiles,Q=V.isUploadLoading,Y=x()(m,"getOffer",{}),K=+x()(Y,"StepId",0),Z=x()(Y,"OfferNo",""),ee=x()(Y,"SubmissionFiles",[]),te={url:x()(Y,["SCARReport","PresignedUrl"],[]),label:"Export SCAR Report"},ne=Object(r.a)();if(Object(y.useEffect)((function(){var e=x()(m,"getOffer",{}),t=x()(e,"SignedPurchaseAgreement")||[],n=x()(e,"SCAR")||[];g()(t)||B(t.map(k.b)),g()(n)||q(n.map(k.b))}),[m]),a)return Object(U.jsx)(F.a,{});if(O&&g()(Y))return Object(U.jsx)(i.a,{severity:"error",sx:{color:ne.palette.error.main},children:"Offer not found"});var ae=K===z.a.offerSteps.paBeingCreated,re=K===z.a.offerSteps.reviewScarRequest,ie=E||Q;return Object(U.jsxs)(C.a,{title:Z,content:!1,secondary:Object(U.jsx)(J,{offer:Y}),children:[Object(U.jsx)(c.a,{children:Object(U.jsxs)(o.a,{container:!0,spacing:R.b,children:[Object(U.jsxs)(o.a,{item:!0,lg:6,xs:12,children:[Object(U.jsx)(w.a,{title:"Offer Information",children:Object(U.jsx)(s.a,{children:Object(U.jsx)(l.a,{sx:{"& td":{borderBottom:"none"}},size:"small",children:Object(U.jsxs)(d.a,{children:[Object(U.jsx)(A.a,{data:Y,source:"OfferNo",label:"Offer No"}),Object(U.jsx)(A.a,{data:Y,source:"PropertyData.FullAddress",label:"Property Address"}),Object(U.jsx)(A.a,{data:Y,source:"PropertyData.OwnerNames",label:"Sellers"}),Object(U.jsx)(A.a,{data:Y,getValue:k.e,label:"Offer Price"}),Object(U.jsx)(A.a,{data:Y,source:"Funding.PurchaseType",label:"Funding"}),Object(U.jsx)(A.a,{data:Y,source:"Funding.LoanType",label:"Loan Type"}),Object(U.jsx)(A.a,{data:Y,getValue:function(e){return Object(k.c)(x()(e,"Funding.DownPayment"))},label:"Down Payment"}),Object(U.jsx)(A.a,{data:Y,source:"Step.messages.advisor",label:"Status"})]})})})}),Object(U.jsx)("br",{}),Object(U.jsx)(se,{offer:Y})]}),Object(U.jsx)(o.a,{item:!0,lg:6,xs:12,children:Object(U.jsxs)(o.a,{container:!0,direction:"column",spacing:R.b,children:[Object(U.jsx)(o.a,{item:!0,xs:12,children:Object(U.jsx)(w.a,{title:"Signed Purchase Agreement",children:Object(U.jsx)(D.a,{name:"PA",files:_,onDrop:B,accept:M,disabled:!ae})})}),Object(U.jsx)(o.a,{item:!0,xs:12,children:Object(U.jsx)(w.a,{title:"SCAR",children:Object(U.jsx)(D.a,{name:"SCAR",files:$,onDrop:q,accept:M,disabled:!re})})})]})})]})}),Object(U.jsx)(j.a,{}),Object(U.jsx)(b.a,{children:Object(U.jsx)(o.a,{item:!0,xs:12,children:Object(U.jsx)(u.a,{direction:"row",justifyContent:"flex-end",children:Object(U.jsxs)(S.a,{children:[Object(U.jsx)(X,{file:te}),Object(U.jsx)(G,{submissionFiles:ee}),Object(U.jsx)(p.a,{color:"primary",variant:"contained",type:"submit",disabled:!ae&&!re||ie,onClick:function(){T(),W()},children:ie?Object(U.jsx)(f.a,{size:"1.5rem",color:"secondary"}):"Update"})]})})})})]})};t.default=function(){var e=Object(a.j)().id;return Object(U.jsx)(je,{id:e})}}}]);
//# sourceMappingURL=19.66a88d8f.chunk.js.map